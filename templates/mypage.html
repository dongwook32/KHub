<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KBU hub | ë§ˆì´í˜ì´ì§€</title>
  <link rel="icon" href="{{ url_for("static", filename="images/logo.png") }}">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for("static", filename="css/nav.css") }}">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { peach: '#FFC8B2', peachDeep: '#FF9F80', cream: '#FFF7F2', cocoa:'#6B7280', ink:'#1F2937', mint:'#B7F4E6', lemon:'#FFF3A3' },
          boxShadow: { soft:'0 10px 30px rgba(255,159,128,.18)', glow:'0 0 0 0 rgba(255,159,128,.0)', card:'0 10px 24px rgba(17,24,39,.08)' },
          borderRadius: { bubble:'999px', xl2:'1.25rem' }
        }
      }
    }
  </script>
  <style>
    html, body { font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; }
    .top-grad{ background: radial-gradient(60% 60% at 0% 0%, #FFF0E7 0%, rgba(255,240,231,0) 60%), radial-gradient(60% 60% at 100% 0%, #FFE7DB 0%, rgba(255,231,219,0) 60%); }
    .glass{ background: rgba(255,255,255,.7); backdrop-filter: blur(10px); }
    /* ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ì€ nav.css (CSS Cascade Layers)ì—ì„œ ê´€ë¦¬ */
    
    /* í—¤ë” í¬ê¸° í†µì¼ ë° í”ë“¤ë¦¼ ë°©ì§€ */
    header {
        height: 80px !important;
        min-height: 80px !important;
        max-height: 80px !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: 9999 !important;
        transform: translateZ(0) !important;
        backface-visibility: hidden !important;
        will-change: auto !important;
    }
    
    header > div:first-child {
        height: 100% !important;
        min-height: 100% !important;
        max-height: 100% !important;
        transform: translateZ(0) !important;
        padding: 12px 16px !important;
    }
    
    /* í—¤ë” ìŠ¤íƒ€ì¼ì€ navigation.cssì—ì„œ ê´€ë¦¬ */
    
    /* ìµëª…ì¹´ë“œ, ê³„ì •, ë‚´ í™œë™ ì„¹ì…˜ ê¸€ì”¨ í¬ê¸° ì¦ê°€ */
    .info-label, .info-value, .account-label, .account-value, .activity-label, .activity-count, .activity-recent {
        font-size: 15px !important;
    }
    
    .section-title {
        font-size: 18px !important;
    }
  </style>
  <link rel="stylesheet" href="{{ url_for("static", filename="css/mypage.css") }}">
  <style>
    .interest-chip.selected {
      background: linear-gradient(135deg, #FF9F80, #FFC8B2);
      border-color: #FF9F80;
      color: white;
    }
    .gender-btn.active {
      background: #f0f0f0;
      border-color: #FF9F80;
      border-width: 2px;
      color: #333;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
    }
    .badge-secondary {
      background-color: #f1f5f9;
      color: #64748b;
      border: 1px solid #e2e8f0;
    }
    .activity-tabs {
      display: flex;
      border-bottom: 1px solid #e2e8f0;
      margin-bottom: 20px;
    }
    .activity-tab {
      padding: 12px 20px;
      border: none;
      background: none;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
    }
    .activity-tab.active {
      color: #FF9F80;
      border-bottom-color: #FF9F80;
      font-weight: 600;
    }
    .activity-tab-content {
      display: none;
    }
    .activity-tab-content.active {
      display: block;
    }
    .activity-list {
      max-height: 400px;
      overflow-y: auto;
    }
    .activity-item {
      padding: 12px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      margin-bottom: 8px;
      background: #fafafa;
      position: relative;
    }
    .activity-item-clickable {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .activity-item-clickable:hover {
      background: #f0f9ff;
      border-color: #FF9F80;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255, 159, 128, 0.15);
    }
    .activity-item-arrow {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #FF9F80;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .activity-item-clickable:hover .activity-item-arrow {
      opacity: 1;
    }
    .activity-item-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .activity-item-content {
      color: #666;
      font-size: 14px;
      margin-bottom: 4px;
    }
    .activity-item-meta {
      font-size: 12px;
      color: #999;
    }
    .activity-item-empty {
      text-align: center;
      color: #999;
      padding: 40px;
    }
    
    /* í†µì¼ëœ Footer ìŠ¤íƒ€ì¼ */
    footer {
        border-top: 1px solid rgba(255, 200, 178, 0.5);
        margin-top: 0;
        padding: 0;
    }
    
    footer > div {
        max-width: 72rem;
        margin: 0 auto;
        padding: 1.5rem 1rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        color: #6B7280;
        text-align: center;
    }
    
    /* ì´ìš© ì•ˆë‚´ ë§í¬ ê·¸ë¦¬ë“œ */
    .link-card {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 16px;
      text-align: center;
      font-weight: 600;
      color: #374151;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: block;
    }
    
    .link-card:hover {
      background: #FFF7F2;
      border-color: #FF9F80;
      color: #FF9F80;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 159, 128, 0.2);
    }
    
    /* ì´ìš© ì•ˆë‚´ ëª¨ë‹¬ ë‚´ìš© ìŠ¤íƒ€ì¼ */
    #infoPanelContent p {
      margin: 0 0 12px 0;
      color: #374151;
      line-height: 1.6;
    }
    
    #infoPanelContent p:last-child {
      margin-bottom: 0;
    }
    
    #infoPanelContent .muted {
      color: #6B7280;
      font-size: 14px;
    }
  </style>
</head>
<body class="bg-cream">
  <div class="top-grad h-[160px] w-full absolute inset-0 -z-10 pointer-events-none"></div>

  <header class="fixed top-0 left-0 right-0 z-50 border-b border-peach/40 glass">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
      <a href="{{ url_for('index') }}" class="flex items-center gap-2 font-extrabold text-lg">
        <img src="{{ url_for("static", filename="images/logo.png") }}" alt="KBU hub" class="w-9 h-9 rounded-full shadow-[0_8px_18px_rgba(255,159,128,.25)]">
        <span>hub</span>
      </a>
      <nav class="ml-auto hidden md:flex">
        <div id="navPill" class="nav-pill">
          <!-- ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì€ navigation.jsì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
      </nav>
      <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60">â˜°</button>
    </div>
    <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70">
      <div class="flex flex-col gap-1 py-2 text-sm">
        <!-- ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì€ navigation.jsì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
      </div>
    </div>
  </header>

  <!-- Flask Flash ë©”ì‹œì§€ í‘œì‹œ -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} flash-message" role="alert" style="position: fixed; top: 100px; left: 50%; transform: translateX(-50%); z-index: 9999; min-width: 300px; max-width: 600px; padding: 12px 16px; border-radius: 10px; transition: opacity 0.5s ease-out; {% if category == 'success' %}background-color: #d1fae5; color: #065f46; border: 1px solid #6ee7b7;{% elif category == 'error' %}background-color: #fee2e2; color: #991b1b; border: 1px solid #fca5a5;{% else %}background-color: #dbeafe; color: #1e40af; border: 1px solid #93c5fd;{% endif %}">
          {{ message }}
          <button type="button" onclick="this.parentElement.style.display='none'" style="float: right; background: none; border: none; font-size: 20px; cursor: pointer; line-height: 1; padding: 0; margin-left: 10px;">&times;</button>
        </div>
        <script>
          setTimeout(function() {
            const alertEl = document.querySelector('.alert.alert-{{ category }}');
            if (alertEl) {
              alertEl.style.opacity = '0';
              setTimeout(function() {
                alertEl.style.display = 'none';
              }, 500);
            }
          }, 3000);
        </script>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <main class="mx-auto max-w-6xl px-4 md:px-6 py-8 space-y-8" style="margin-top: 80px;">
    <!-- ìƒë‹¨ íˆì–´ë¡œ ì„¹ì…˜ -->
    <div class="hero-summary">
      <div class="hero-bg-blur hero-bg-blur-1"></div>
      <div class="hero-bg-blur hero-bg-blur-2"></div>
      <div class="hero-content">
        <div class="hero-avatar">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-400">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </div>
        <div class="hero-info">
          <div class="hero-title">ë‚´ ì •ë³´</div>
          <div class="hero-name">
            <span id="userName"></span>
          </div>
          <div class="hero-details">
            <span id="userDept">í•œêµ­ì„±ì„œëŒ€</span>
          </div>
          <div class="hero-details">
            <span id="userStudentId"></span>í•™ë²ˆ Â· <span id="userStatus"></span>
          </div>
          <div class="hero-intro" id="userIntro"></div>
        </div>
        <div class="hero-actions">
          <button class="btn btn-destructive" onclick="handleLogout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            ë¡œê·¸ì•„ì›ƒ
          </button>
        </div>
      </div>
    </div>

    <!-- ì„¹ì…˜ 1: í”„ë¡œí•„ & ìµëª…ì¹´ë“œ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-title">ìµëª…ì¹´ë“œ</div>
        <button class="btn btn-outline btn-sm" onclick="openModal('profileModal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
          </svg>
          ìˆ˜ì •
        </button>
      </div>
      <div class="section-content">
        <div class="info-item">
          <div class="info-label">ë‹‰ë„¤ì„</div>
          <div class="info-value" id="anonNickname">ìµëª…ì¹´ë“œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</div>
        </div>
        <div class="info-item">
          <div class="info-label">í•™ë²ˆ</div>
          <div class="info-value" id="anonYear">-</div>
          </div>
        <div class="info-item">
          <div class="info-label">ì„±ë³„</div>
          <div class="info-value" id="anonGender">-</div>
        </div>
        <div class="info-item">
          <div class="info-label">ìê¸°ì†Œê°œ</div>
          <div class="info-value" id="anonBio">-</div>
        </div>
        <div class="info-item">
          <div class="info-label">ê´€ì‹¬ì‚¬</div>
          <div class="interests-list" id="anonInterests">
            <span class="text-gray-500">ì„ íƒëœ ê´€ì‹¬ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ì„¹ì…˜ 2: ê³„ì • -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-title">ê³„ì •</div>
        <button class="btn btn-outline btn-sm" onclick="openModal('accountModal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
        </button>
      </div>
      <div class="account-grid">
        <div class="account-card">
          <div class="account-label">ì´ë¦„</div>
          <div class="account-value" id="accountName"></div>
        </div>
        <div class="account-card">
          <div class="account-label">í•™ë²ˆ</div>
          <div class="account-value" id="accountStudentId"></div>
        </div>
        <div class="account-card">
          <div class="account-label">ìƒì¼</div>
          <div class="account-value" id="accountBirthday"></div>
        </div>
        <div class="account-card">
          <div class="account-label">ì„±ë³„</div>
          <div class="account-value" id="accountGender"></div>
        </div>
        <div class="account-card">
          <div class="account-label">ì¬í•™ ìƒíƒœ</div>
          <div class="account-value" id="accountStatus"></div>
        </div>
        <div class="account-card">
          <div class="account-label">ì´ë©”ì¼</div>
          <div class="account-value" id="accountEmail"></div>
        </div>
      </div>
    </div>

    <!-- ì„¹ì…˜ 3: ë‚´ í™œë™ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-title">ë‚´ í™œë™</div>
        <button class="btn btn-outline btn-sm" onclick="openModal('activityModal')">
          ë” ë³´ê¸°
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12 5 19 12 12 19"/>
          </svg>
        </button>
      </div>
      <div class="activity-grid">
        <div class="activity-card">
          <div class="activity-label">ë‚´ ê¸€</div>
          <div class="activity-count" id="myPostsCount">0</div>
          <div class="activity-recent" id="myPostsRecent">ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
        <div class="activity-card">
          <div class="activity-label">ë‚´ ëŒ“ê¸€</div>
          <div class="activity-count" id="myCommentsCount">0</div>
          <div class="activity-recent" id="myCommentsRecent">ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
        <div class="activity-card">
          <div class="activity-label">ì¢‹ì•„ìš”í•œ ê¸€</div>
          <div class="activity-count" id="myLikesCount">0</div>
          <div class="activity-recent" id="myLikesRecent">ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
        <div class="activity-card">
          <div class="activity-label">ì¢‹ì•„ìš”í•œ ëŒ“ê¸€</div>
          <div class="activity-count" id="myCommentLikesCount">0</div>
          <div class="activity-recent" id="myCommentLikesRecent">ì¢‹ì•„ìš”í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>
      </div>
    </div>

    <!-- ì„¹ì…˜ 4: ì´ìš© ì•ˆë‚´ & ê¸°íƒ€ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-title">ì´ìš© ì•ˆë‚´</div>
      </div>
      <div class="links-grid">
        <button class="link-card" data-key="contact" onclick="showInfoPanel('contact')">ë¬¸ì˜í•˜ê¸°</button>
        <button class="link-card" data-key="notice" onclick="showInfoPanel('notice')">ê³µì§€ì‚¬í•­</button>
        <button class="link-card" data-key="tos" onclick="showInfoPanel('tos')">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€</button>
        <button class="link-card" data-key="privacy" onclick="showInfoPanel('privacy')">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</button>
        <button class="link-card" data-key="youth" onclick="showInfoPanel('youth')">ì²­ì†Œë…„ ë³´í˜¸ ì •ì±…</button>
        <button class="link-card" data-key="consent" onclick="showInfoPanel('consent')">ì •ë³´ ë™ì˜ ì„¤ì •</button>
      </div>
      
      <div class="footer-actions">
        <div class="copyright">Â© 2025 KBU Hub</div>
        <button class="btn btn-destructive" onclick="openModal('deleteModal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
          </svg>
          íšŒì› íƒˆí‡´
        </button>
      </div>
    </div>
  </main>

  <!-- í”„ë¡œí•„ ìˆ˜ì • ëª¨ë‹¬ -->
  <div id="profileModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">í”„ë¡œí•„ ìˆ˜ì •</div>
        <button class="modal-close" onclick="closeModal('profileModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>ë‹‰ë„¤ì„</label>
          <input id="editAnonNickname" type="text" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="10">
        </div>
        <div class="form-group">
          <label>í•™ë²ˆ</label>
          <select id="editAnonYear">
            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
            <option value="25í•™ë²ˆ">25í•™ë²ˆ</option>
            <option value="24í•™ë²ˆ">24í•™ë²ˆ</option>
            <option value="23í•™ë²ˆ">23í•™ë²ˆ</option>
            <option value="22í•™ë²ˆ">22í•™ë²ˆ</option>
            <option value="21í•™ë²ˆ">21í•™ë²ˆ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ì„±ë³„ (íšŒì›ê°€ì… ì •ë³´ ì—°ë™)</label>
          <div id="editAnonGender" class="flex gap-2">
            <div class="flex-1 py-2 px-4 border rounded bg-gray-100 text-gray-600 text-center cursor-not-allowed">
              <span id="editGenderEmoji">ğŸ‘¤</span> <span id="editGenderText">ë¡œë”©ì¤‘...</span>
            </div>
          </div>
          <div class="text-xs text-gray-500 mt-1">
            íšŒì›ê°€ì… ì‹œ ì…ë ¥í•œ ì„±ë³„ì´ ìë™ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.
          </div>
        </div>
        <div class="form-group">
          <label>ìê¸°ì†Œê°œ</label>
          <textarea id="editAnonBio" rows="4" placeholder="ìê¸°ì†Œê°œë¥¼ ì…ë ¥í•˜ì„¸ìš”" maxlength="100"></textarea>
        </div>
        <div class="form-group">
          <label>ê´€ì‹¬ì‚¬</label>
          <div id="editAnonInterests" class="flex flex-wrap gap-2" style="margin-bottom: 16px;">
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ì˜í™”" onclick="toggleAnonInterest(this)">ì˜í™”</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ìš´ë™" onclick="toggleAnonInterest(this)">ìš´ë™</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ê²Œì„" onclick="toggleAnonInterest(this)">ê²Œì„</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ìŒì•…" onclick="toggleAnonInterest(this)">ìŒì•…</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ì¹´í˜" onclick="toggleAnonInterest(this)">ì¹´í˜</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ì—¬í–‰" onclick="toggleAnonInterest(this)">ì—¬í–‰</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ìŠ¤í„°ë””" onclick="toggleAnonInterest(this)">ìŠ¤í„°ë””</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ë…ì„œ" onclick="toggleAnonInterest(this)">ë…ì„œ</button>
            <button type="button" class="interest-chip px-3 py-1 border rounded-full text-sm" data-value="ë§›ì§‘" onclick="toggleAnonInterest(this)">ë§›ì§‘</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" onclick="saveAnonProfile()">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
  <div id="accountModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</div>
        <button class="modal-close" onclick="closeModal('accountModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div class="form-group">
          <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div class="form-group">
          <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
          <input type="password" id="confirmPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div class="text-xs text-muted-foreground">8ì ì´ìƒ, ì˜ë¬¸/ìˆ«ì ì¡°í•© ê¶Œì¥</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" onclick="changePassword()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          ë³€ê²½
        </button>
      </div>
    </div>
  </div>

  <!-- ì •ë³´ ë™ì˜ ì„¤ì • ëª¨ë‹¬ -->
  <div id="consentModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">ì •ë³´ ë™ì˜ ì„¤ì •</div>
        <button class="modal-close" onclick="closeModal('consentModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="consent-item">
          <span>ë§ˆì¼€íŒ… ì´ë©”ì¼ ìˆ˜ì‹ </span>
          <label class="switch">
            <input type="checkbox">
            <span class="slider"></span>
          </label>
        </div>
        <div class="consent-item">
          <span>ì•Œë¦¼ í‘¸ì‹œ ìˆ˜ì‹ </span>
          <label class="switch">
            <input type="checkbox">
            <span class="slider"></span>
          </label>
        </div>
        <div class="consent-item">
          <span>ìµëª… ë°ì´í„° í†µê³„ í™œìš©</span>
          <label class="switch">
            <input type="checkbox" checked>
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" onclick="closeModal('consentModal')">ì €ì¥</button>
      </div>
    </div>
  </div>

  <!-- íšŒì› íƒˆí‡´ ëª¨ë‹¬ -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">ì •ë§ íƒˆí‡´í•˜ì‹œê² ì–´ìš”?</div>
        <button class="modal-close" onclick="closeModal('deleteModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <p class="text-sm text-muted-foreground">ê²Œì‹œíŒì— ë‚¨ê¸´ ê¸€/ëŒ“ê¸€ì€ ìš´ì˜ì •ì±…ì— ë”°ë¼ ìµëª…í™” ì²˜ë¦¬ë˜ë©°, ê³„ì • ì •ë³´ëŠ” ë³µêµ¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        <p class="text-sm text-muted-foreground" style="margin-top: 8px; color: #ef4444; font-weight: 600;">âš ï¸ ëª¨ë“  ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë˜ë©° ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal('deleteModal')">ì·¨ì†Œ</button>
        <button class="btn btn-destructive" onclick="handleDeleteAccount()">íƒˆí‡´ ì§„í–‰</button>
      </div>
    </div>
  </div>

  <!-- ì´ìš© ì•ˆë‚´ ëª¨ë‹¬ -->
  <div id="infoModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <div class="modal-title" id="infoPanelTitle"></div>
        <button class="modal-close" onclick="closeInfoPanel()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="infoPanelContent"></div>
      </div>
    </div>
  </div>

  <!-- ë‚´ í™œë™ ìƒì„¸ ëª¨ë‹¬ -->
  <div id="activityModal" class="modal">
    <div class="modal-content" style="max-width: 800px;">
      <div class="modal-header">
        <div class="modal-title">ë‚´ í™œë™ ìƒì„¸</div>
        <button class="modal-close" onclick="closeModal('activityModal')">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="activity-tabs">
          <button class="activity-tab active" onclick="showActivityTab('posts')">ë‚´ ê¸€</button>
          <button class="activity-tab" onclick="showActivityTab('comments')">ë‚´ ëŒ“ê¸€</button>
          <button class="activity-tab" onclick="showActivityTab('likes')">ì¢‹ì•„ìš”í•œ ê¸€</button>
          <button class="activity-tab" onclick="showActivityTab('commentLikes')">ì¢‹ì•„ìš”í•œ ëŒ“ê¸€</button>
        </div>
        
        <div id="postsTab" class="activity-tab-content active">
          <div class="activity-list" id="myPostsList">
            <div class="activity-item-empty">ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
          </div>
        </div>
        
        <div id="commentsTab" class="activity-tab-content">
          <div class="activity-list" id="myCommentsList">
            <div class="activity-item-empty">ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
          </div>
        </div>
        
        <div id="likesTab" class="activity-tab-content">
          <div class="activity-list" id="myLikesList">
            <div class="activity-item-empty">ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
          </div>
        </div>
        
        <div id="commentLikesTab" class="activity-tab-content">
          <div class="activity-list" id="myCommentLikesList">
            <div class="activity-item-empty">ì¢‹ì•„ìš”í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <div>
      Â© <span id="year"></span> KBU hub Â· All rights reserved.
    </div>
  </footer>

  <script src="{{ url_for("static", filename="js/script.js") }}"></script>
  <script>
    // ëª¨ë°”ì¼ ë©”ë‰´ëŠ” navigation.jsì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤

    // ëª¨ë‹¬ ë‹«ê¸°
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
    window.addEventListener('click', (e) => {
      if (e.target.classList.contains('modal')) {
        e.target.style.display = 'none';
      }
    });

    // ìµëª…ì¹´ë“œ ì •ë³´ ë¡œë“œ (ì„œë²„ì—ì„œ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°)
    async function loadAnonProfile() {
      try {
        // ì„œë²„ì—ì„œ ìµœì‹  ìµëª… í”„ë¡œí•„ ê°€ì ¸ì˜¤ê¸°
        const response = await fetch('/api/anon-profile');
        const result = await response.json();
        
        let anonProfile = null;
        
        if (result.success && result.profile) {
          // ì„œë²„ì—ì„œ ë°›ì€ í”„ë¡œí•„ì„ localStorageì— ì €ì¥
          localStorage.setItem('anonProfile', JSON.stringify(result.profile));
          anonProfile = result.profile;
          console.log('[ìµëª…ì¹´ë“œ ë¡œë“œ] ì„œë²„ì—ì„œ ìµœì‹  í”„ë¡œí•„ ê°€ì ¸ì˜´:', anonProfile);
        } else {
          // ì„œë²„ì— ì—†ìœ¼ë©´ localStorageì—ì„œ ê°€ì ¸ì˜¤ê¸°
          anonProfile = JSON.parse(localStorage.getItem('anonProfile') || 'null');
          console.log('[ìµëª…ì¹´ë“œ ë¡œë“œ] localStorageì—ì„œ í”„ë¡œí•„ ê°€ì ¸ì˜´:', anonProfile);
        }
        
        if (anonProfile) {
          document.getElementById('anonNickname').textContent = anonProfile.nickname || 'ìµëª…ì˜ì¹œêµ¬';
          // year í•„ë“œì—ì„œ "í•™ë²ˆ" í…ìŠ¤íŠ¸ ì œê±° (ì´ë¯¸ HTMLì—ì„œ "í•™ë²ˆ" ë ˆì´ë¸”ì´ ìˆìŒ)
          const yearValue = anonProfile.year || '-';
          const cleanYear = yearValue.replace('í•™ë²ˆ', '');
          document.getElementById('anonYear').textContent = cleanYear;
          document.getElementById('anonGender').textContent = anonProfile.gender || '-';
          document.getElementById('anonBio').textContent = anonProfile.bio || '-';
          
          // ê´€ì‹¬ì‚¬ í‘œì‹œ
          const interestsContainer = document.getElementById('anonInterests');
          if (anonProfile.interests && anonProfile.interests.length > 0) {
            const interestsHTML = anonProfile.interests.map(interest => 
              `<span class="badge badge-secondary">#${interest}</span>`
            ).join('');
            interestsContainer.innerHTML = interestsHTML;
          } else {
            interestsContainer.innerHTML = '<span class="text-gray-500">ì„ íƒëœ ê´€ì‹¬ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤.</span>';
          }
        }
      } catch (e) {
        console.error('ìµëª…ì¹´ë“œ ë¡œë“œ ì‹¤íŒ¨:', e);
      }
    }

    // ì„±ë³„ ì„ íƒ í•¨ìˆ˜ëŠ” ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŒ (íšŒì›ê°€ì… ì •ë³´ì—ì„œ ìë™ ì„¤ì •)
    
    // íšŒì›ê°€ì… ì •ë³´ì—ì„œ ì„±ë³„ ê°€ì ¸ì˜¤ê¸°
    let userGender = 'ë‚¨ì'; // ì „ì—­ ë³€ìˆ˜ë¡œ ì €ì¥
    
    async function loadUserGenderForMypage() {
      try {
        const response = await fetch('/api/user-info');
        const data = await response.json();
        
        if (data.success && data.user) {
          userGender = data.user.gender || 'ë‚¨ì';
          setGenderDisplayForMypage(userGender);
        } else {
          console.error('ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', data.message);
          setGenderDisplayForMypage('ë‚¨ì'); // ê¸°ë³¸ê°’
        }
      } catch (error) {
        console.error('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
        setGenderDisplayForMypage('ë‚¨ì'); // ê¸°ë³¸ê°’
      }
    }
    
    // ì„±ë³„ í‘œì‹œ ì„¤ì •
    function setGenderDisplayForMypage(gender) {
      const genderEmoji = gender === 'ë‚¨ì' ? 'ğŸ™‹â€â™‚ï¸' : 'ğŸ™‹â€â™€ï¸';
      const genderEmojiSpan = document.getElementById('editGenderEmoji');
      const genderTextSpan = document.getElementById('editGenderText');
      const genderDisplay = document.getElementById('editAnonGender');
      
      if (genderEmojiSpan && genderTextSpan && genderDisplay) {
        // í‘œì‹œ ì—…ë°ì´íŠ¸
        genderEmojiSpan.textContent = genderEmoji;
        genderTextSpan.textContent = gender;
        
        // ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        const displayDiv = genderDisplay.querySelector('div');
        if (displayDiv) {
          displayDiv.style.background = 'linear-gradient(135deg, #FF9F80, #FFC8B2)';
          displayDiv.style.color = 'white';
          displayDiv.style.borderColor = '#FF9F80';
        }
        
        console.log(`[ë§ˆì´í˜ì´ì§€] íšŒì›ê°€ì… ì •ë³´ì—ì„œ ${gender}ë¡œ ì„¤ì •ë¨`);
      }
    }

    // ê´€ì‹¬ì‚¬ í† ê¸€ í•¨ìˆ˜
    function toggleAnonInterest(button) {
      button.classList.toggle('selected');
    }

    // ë‹‰ë„¤ì„ ì¤‘ë³µ ê²€ì‚¬ í•¨ìˆ˜ (ì„œë²„ API ì‚¬ìš©)
    async function isNicknameAvailable(nickname) {
      if (!nickname || nickname.trim() === '') {
        return true;
      }
      
      try {
        const response = await fetch("{{ url_for('check_nickname') }}", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ nickname: nickname.trim() })
        });
        
        const result = await response.json();
        return result.available;
      } catch (error) {
        console.error('ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬ ì‹¤íŒ¨:', error);
        return true; // ì˜¤ë¥˜ ì‹œ ì§„í–‰ í—ˆìš©
      }
    }

    // ìµëª…ì¹´ë“œ ì €ì¥
    async function saveAnonProfile() {
      const nickname = document.getElementById('editAnonNickname').value.trim() || 'ìµëª…ì˜ì¹œêµ¬';
      const year = document.getElementById('editAnonYear').value;
      const gender = userGender; // íšŒì›ê°€ì… ì •ë³´ì—ì„œ ê°€ì ¸ì˜¨ ì„±ë³„ ì‚¬ìš©
      const bio = document.getElementById('editAnonBio').value.trim();
      const interests = Array.from(document.querySelectorAll('.interest-chip.selected')).map(chip => chip.dataset.value);
      
      if (!year) {
        alert('í•™ë²ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      if (interests.length === 0) {
        alert('ê´€ì‹¬ì‚¬ë¥¼ ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // ë‹‰ë„¤ì„ ì¤‘ë³µ ê²€ì¦
      if (nickname) {
        const available = await isNicknameAvailable(nickname);
        if (!available) {
          alert('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
          document.getElementById('editAnonNickname').focus();
          return;
        }
      }
      
      // ì´ì „ í”„ë¡œí•„ ì €ì¥ (ë³€ê²½ ì‚¬í•­ ë¹„êµìš©)
      const originalProfile = JSON.parse(localStorage.getItem('anonProfile') || 'null');
      
      const anonProfile = { 
        nickname, 
        year, 
        gender, 
        bio, 
        interests,
        avatar: nickname[0] || 'ìµ'
      };
      
      try {
        // ì„œë²„ì— ìµëª… í”„ë¡œí•„ ì €ì¥
        const response = await fetch("{{ url_for('save_anon_profile_api') }}", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(anonProfile)
        });
        
        const result = await response.json();
        
        if (result.success) {
          // ìƒˆë¡œ ì¶”ê°€ëœ ê´€ì‹¬ì‚¬ëŠ” leftRoomsì—ì„œ ì œê±° (ë‹¤ì‹œ ì…ì¥ ê°€ëŠ¥í•˜ë„ë¡)
          try {
            let leftRooms = JSON.parse(localStorage.getItem('leftRooms') || '[]');
            
            // ìƒˆë¡œ ì¶”ê°€ëœ ê´€ì‹¬ì‚¬ ì°¾ê¸°
            let newInterests = [];
            if (originalProfile && originalProfile.interests) {
              // ê¸°ì¡´ í”„ë¡œí•„ì´ ìˆëŠ” ê²½ìš°: ìƒˆë¡œ ì¶”ê°€ëœ ê´€ì‹¬ì‚¬ë§Œ
              newInterests = interests.filter(interest => 
                !originalProfile.interests.includes(interest)
              );
            } else {
              // ê¸°ì¡´ í”„ë¡œí•„ì´ ì—†ëŠ” ê²½ìš°: ëª¨ë“  ê´€ì‹¬ì‚¬ê°€ ìƒˆë¡œìš´ ê²ƒ
              newInterests = interests;
            }
            
            // ìƒˆë¡œ ì¶”ê°€ëœ ê´€ì‹¬ì‚¬ë¥¼ leftRoomsì—ì„œ ì œê±°
            if (newInterests.length > 0) {
              leftRooms = leftRooms.filter(room => !newInterests.includes(room));
              localStorage.setItem('leftRooms', JSON.stringify(leftRooms));
              console.log(`[ê´€ì‹¬ì‚¬ ë³µêµ¬] ${newInterests.join(', ')}ë¥¼ ë‚˜ê°„ ë°© ëª©ë¡ì—ì„œ ì œê±° (${leftRooms.length}ê°œ ë‚¨ìŒ)`);
            }
          } catch (e) {
            console.error('[ê´€ì‹¬ì‚¬ ë³µêµ¬ ì˜¤ë¥˜]:', e);
          }
          
          // localStorageì—ë„ ì €ì¥ (leftRooms ì—…ë°ì´íŠ¸ í›„ì— ì €ì¥)
          localStorage.setItem('anonProfile', JSON.stringify(anonProfile));
          
          loadAnonProfile(); // UI ì—…ë°ì´íŠ¸
          closeModal('profileModal');
          alert('ìµëª…ì¹´ë“œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(result.message || 'ìµëª…ì¹´ë“œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('ìµëª…ì¹´ë“œ ì €ì¥ ì‹¤íŒ¨:', error);
        alert('ìµëª…ì¹´ë“œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }

    // ëª¨ë‹¬ ì—´ ë•Œ ê¸°ì¡´ ë°ì´í„° ë¡œë“œ
    async function openModal(modalId) {
      document.getElementById(modalId).style.display = 'flex';
      
      if (modalId === 'profileModal') {
        // íšŒì›ê°€ì… ì •ë³´ì—ì„œ ì„±ë³„ ë¡œë“œ
        loadUserGenderForMypage();
        
        // ì„œë²„ì—ì„œ ìµœì‹  ìµëª… í”„ë¡œí•„ ê°€ì ¸ì˜¤ê¸°
        try {
          const response = await fetch('/api/anon-profile');
          const result = await response.json();
          
          if (result.success && result.profile) {
            // ì„œë²„ì—ì„œ ë°›ì€ í”„ë¡œí•„ì„ localStorageì— ì €ì¥
            localStorage.setItem('anonProfile', JSON.stringify(result.profile));
            console.log('[ëª¨ë‹¬ ì—´ê¸°] ì„œë²„ì—ì„œ ìµœì‹  ìµëª… í”„ë¡œí•„ ë¡œë“œ:', result.profile);
          }
        } catch (error) {
          console.error('[ëª¨ë‹¬ ì—´ê¸°] ì„œë²„ì—ì„œ í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
        
        // ìµœì‹  ìµëª… í”„ë¡œí•„ ê°€ì ¸ì˜¤ê¸° (localStorageì—ì„œ ë‹¤ì‹œ ì½ìŒ)
        const anonProfile = JSON.parse(localStorage.getItem('anonProfile') || 'null');
        
        console.log('[ëª¨ë‹¬ ì—´ê¸°] ìµœì¢… ìµëª… í”„ë¡œí•„:', anonProfile);
        
        if (anonProfile) {
          document.getElementById('editAnonNickname').value = anonProfile.nickname || '';
          document.getElementById('editAnonYear').value = anonProfile.year || '';
          document.getElementById('editAnonBio').value = anonProfile.bio || '';
          
          // ì„±ë³„ì€ íšŒì›ê°€ì… ì •ë³´ì—ì„œ ìë™ ì„¤ì •ë˜ë¯€ë¡œ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
          
          // ê´€ì‹¬ì‚¬ ì„ íƒ ë³µì› (ëª¨ë“  ì²´í¬ë°•ìŠ¤ë¥¼ ë¨¼ì € ì´ˆê¸°í™”)
          const interestChips = document.querySelectorAll('.interest-chip');
          interestChips.forEach(chip => chip.classList.remove('selected'));
          
          // ìµëª… í”„ë¡œí•„ì— ìˆëŠ” ê´€ì‹¬ì‚¬ë§Œ ì„ íƒ
          if (anonProfile.interests && anonProfile.interests.length > 0) {
            console.log('[ëª¨ë‹¬ ì—´ê¸°] ë³µì›í•  ê´€ì‹¬ì‚¬:', anonProfile.interests);
            anonProfile.interests.forEach(interest => {
              const chip = document.querySelector(`[data-value="${interest}"]`);
              if (chip) {
                chip.classList.add('selected');
                console.log(`[ê´€ì‹¬ì‚¬ ë³µì›] ${interest} ì„ íƒë¨`);
              } else {
                console.warn(`[ê´€ì‹¬ì‚¬ ë³µì›] ${interest}ì— í•´ë‹¹í•˜ëŠ” ì¹©ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
              }
            });
          } else {
            console.log('[ëª¨ë‹¬ ì—´ê¸°] ì„ íƒëœ ê´€ì‹¬ì‚¬ ì—†ìŒ');
          }
          
          // ë‹‰ë„¤ì„ ì‹¤ì‹œê°„ ê²€ì¦ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
          const nicknameInput = document.getElementById('editAnonNickname');
          let nicknameCheckTimeout = null;
          
          nicknameInput.addEventListener('input', function() {
            const nicknameValue = this.value.trim();
            
            // ë””ë°”ìš´ì‹± ì ìš©
            clearTimeout(nicknameCheckTimeout);
            nicknameCheckTimeout = setTimeout(async () => {
              const nicknameError = document.getElementById('nickname-error-modal');
              
              if (nicknameValue) {
                const available = await isNicknameAvailable(nicknameValue);
                
                if (!available) {
                  if (!nicknameError) {
                    const errorDiv = document.createElement('div');
                    errorDiv.id = 'nickname-error-modal';
                    errorDiv.className = 'text-red-500 text-sm mt-1';
                    errorDiv.innerHTML = 'âš ï¸ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.';
                    this.parentNode.appendChild(errorDiv);
                  }
                  this.style.borderColor = '#ef4444';
                } else {
                  if (nicknameError) {
                    nicknameError.remove();
                  }
                  this.style.borderColor = '#10b981';
                }
              } else {
                if (nicknameError) {
                  nicknameError.remove();
                }
                this.style.borderColor = '';
              }
            }, 500);
          });
        }
      }
    }

    // íšŒì›ê°€ì… ì •ë³´ ë¡œë“œ
    function loadUserProfile() {
      try {
        const userProfile = JSON.parse(localStorage.getItem('userProfile') || 'null');
        if (userProfile) {
          // ë‚´ ì •ë³´ ì„¹ì…˜ ì—…ë°ì´íŠ¸
          document.getElementById('userName').textContent = userProfile.name || 'ì‚¬ìš©ì';
          document.getElementById('userDept').textContent = 'í•œêµ­ì„±ì„œëŒ€'; // ê³ ì •ê°’
          document.getElementById('userStudentId').textContent = userProfile.studentId || '2022';
          document.getElementById('userStatus').textContent = userProfile.status || 'ì¬í•™ìƒ';
          
          // ê³„ì • ì„¹ì…˜ ì—…ë°ì´íŠ¸
          document.getElementById('accountName').textContent = userProfile.name || 'ì‚¬ìš©ì';
          document.getElementById('accountStudentId').textContent = userProfile.studentId || '2022';
          document.getElementById('accountBirthday').textContent = userProfile.birthday || '1999-01-01';
          document.getElementById('accountGender').textContent = userProfile.gender || 'ë‚¨ì';
          document.getElementById('accountStatus').textContent = userProfile.status || 'ì¬í•™ìƒ';
          document.getElementById('accountEmail').textContent = userProfile.email || 'user@bible.ac.kr';
        } else {
          // ì‚¬ìš©ì í”„ë¡œí•„ì´ ì—†ëŠ” ê²½ìš°ì—ë„ í•œêµ­ì„±ì„œëŒ€ëŠ” ê³ ì • í‘œì‹œ
          document.getElementById('userDept').textContent = 'í•œêµ­ì„±ì„œëŒ€';
        }
      } catch (e) {
        console.error('ì‚¬ìš©ì í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨:', e);
        // ì˜¤ë¥˜ ë°œìƒ ì‹œì—ë„ í•œêµ­ì„±ì„œëŒ€ëŠ” ê³ ì • í‘œì‹œ
        document.getElementById('userDept').textContent = 'í•œêµ­ì„±ì„œëŒ€';
      }
    }

    // íšŒì›ê°€ì… ì •ë³´ ì €ì¥ (íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ í˜¸ì¶œë  í•¨ìˆ˜)
    function saveUserProfile(profileData) {
      try {
        localStorage.setItem('userProfile', JSON.stringify(profileData));
        loadUserProfile(); // UI ì—…ë°ì´íŠ¸
        console.log('ì‚¬ìš©ì í”„ë¡œí•„ ì €ì¥ ì™„ë£Œ:', profileData);
      } catch (e) {
        console.error('ì‚¬ìš©ì í”„ë¡œí•„ ì €ì¥ ì‹¤íŒ¨:', e);
      }
    }

    // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•¨ìˆ˜
    async function changePassword() {
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      // ì…ë ¥ê°’ ê²€ì¦
      if (!currentPassword || !newPassword || !confirmPassword) {
        alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      // ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
      if (newPassword !== confirmPassword) {
        alert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return;
      }
      
      // ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ê²€ì¦ (8ì ì´ìƒ, ì˜ë¬¸/ìˆ«ì ì¡°í•©)
      const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/;
      if (!passwordRegex.test(newPassword)) {
        alert('ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, ì˜ë¬¸ê³¼ ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }
      
      try {
        // ì„œë²„ì— ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ìš”ì²­
        const response = await fetch("{{ url_for('change_password') }}", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            current_password: currentPassword,
            new_password: newPassword
          })
        });
        
        const result = await response.json();
        
        if (result.success) {
          // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
          document.getElementById('currentPassword').value = '';
          document.getElementById('newPassword').value = '';
          document.getElementById('confirmPassword').value = '';
          
          // ëª¨ë‹¬ ë‹«ê¸°
          closeModal('accountModal');
          
          // ì„±ê³µ ë©”ì‹œì§€
          alert(result.message);
        } else {
          // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
          alert(result.message);
        }
        
      } catch (error) {
        console.error('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨:', error);
        alert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }

    // ë‚´ í™œë™ ë°ì´í„° ê´€ë¦¬
    function getMyActivity() {
      try {
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) return { posts: [], comments: [], likes: [], commentLikes: [] };
        
        const activity = JSON.parse(localStorage.getItem(`activity_${currentUser}`) || '{"posts":[],"comments":[],"likes":[],"commentLikes":[]}');
        return activity;
      } catch (e) {
        console.error('í™œë™ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', e);
        return { posts: [], comments: [], likes: [], commentLikes: [] };
      }
    }

    function saveMyActivity(activity) {
      try {
        const currentUser = localStorage.getItem('currentUser');
        if (!currentUser) return;
        
        localStorage.setItem(`activity_${currentUser}`, JSON.stringify(activity));
      } catch (e) {
        console.error('í™œë™ ë°ì´í„° ì €ì¥ ì‹¤íŒ¨:', e);
      }
    }

    // ê²Œì‹œê¸€ ì‘ì„± ì‹œ í˜¸ì¶œí•  í•¨ìˆ˜ (ê²Œì‹œíŒì—ì„œ ì‚¬ìš©)
    function addMyPost(postData) {
      const activity = getMyActivity();
      const post = {
        id: Date.now(),
        title: postData.title,
        content: postData.content,
        category: postData.category || 'ì¼ë°˜',
        date: new Date().toISOString(),
        likes: 0
      };
      activity.posts.unshift(post);
      saveMyActivity(activity);
      loadMyActivity();
    }

    // ëŒ“ê¸€ ì‘ì„± ì‹œ í˜¸ì¶œí•  í•¨ìˆ˜ (ê²Œì‹œíŒì—ì„œ ì‚¬ìš©)
    function addMyComment(commentData) {
      const activity = getMyActivity();
      const comment = {
        id: Date.now(),
        content: commentData.content,
        postTitle: commentData.postTitle,
        postId: commentData.postId,
        date: new Date().toISOString()
      };
      activity.comments.unshift(comment);
      saveMyActivity(activity);
      loadMyActivity();
    }

    // ì¢‹ì•„ìš” ì¶”ê°€/ì œê±° ì‹œ í˜¸ì¶œí•  í•¨ìˆ˜ (ê²Œì‹œíŒì—ì„œ ì‚¬ìš©)
    function toggleMyLike(postData) {
      const activity = getMyActivity();
      const existingIndex = activity.likes.findIndex(like => like.postId === postData.id);
      
      if (existingIndex >= 0) {
        // ì¢‹ì•„ìš” ì œê±°
        activity.likes.splice(existingIndex, 1);
      } else {
        // ì¢‹ì•„ìš” ì¶”ê°€
        const like = {
          id: Date.now(),
          postId: postData.id,
          postTitle: postData.title,
          postAuthor: postData.author,
          date: new Date().toISOString()
        };
        activity.likes.unshift(like);
      }
      saveMyActivity(activity);
      loadMyActivity();
    }

    // ëŒ“ê¸€ ì¢‹ì•„ìš” ì¶”ê°€/ì œê±° ì‹œ í˜¸ì¶œí•  í•¨ìˆ˜ (ê²Œì‹œíŒì—ì„œ ì‚¬ìš©)
    function toggleMyCommentLike(commentData) {
      const activity = getMyActivity();
      const existingIndex = activity.commentLikes.findIndex(like => like.commentId === commentData.id);
      
      if (existingIndex >= 0) {
        // ì¢‹ì•„ìš” ì œê±°
        activity.commentLikes.splice(existingIndex, 1);
      } else {
        // ì¢‹ì•„ìš” ì¶”ê°€
        const like = {
          id: Date.now(),
          commentId: commentData.id,
          commentContent: commentData.content,
          commentAuthor: commentData.author,
          postId: commentData.postId,
          date: new Date().toISOString()
        };
        activity.commentLikes.unshift(like);
      }
      saveMyActivity(activity);
      loadMyActivity();
    }

    // ë‚´ í™œë™ ì •ë³´ ë¡œë“œ ë° UI ì—…ë°ì´íŠ¸
    function loadMyActivity() {
      const activity = getMyActivity();
      
      // ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
      document.getElementById('myPostsCount').textContent = activity.posts.length;
      document.getElementById('myCommentsCount').textContent = activity.comments.length;
      document.getElementById('myLikesCount').textContent = activity.likes.length;
      document.getElementById('myCommentLikesCount').textContent = activity.commentLikes.length;
      
      // ìµœê·¼ í™œë™ ì—…ë°ì´íŠ¸
      if (activity.posts.length > 0) {
        const recentPost = activity.posts[0];
        document.getElementById('myPostsRecent').textContent = `ìµœê·¼: "${recentPost.title}"`;
      } else {
        document.getElementById('myPostsRecent').textContent = 'ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
      }
      
      if (activity.comments.length > 0) {
        const recentComment = activity.comments[0];
        const shortContent = recentComment.content.length > 20 ? 
          recentComment.content.substring(0, 20) + '...' : recentComment.content;
        document.getElementById('myCommentsRecent').textContent = `ìµœê·¼: "${shortContent}"`;
      } else {
        document.getElementById('myCommentsRecent').textContent = 'ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
      }
      
      if (activity.likes.length > 0) {
        const recentLike = activity.likes[0];
        document.getElementById('myLikesRecent').textContent = `ìµœê·¼: "${recentLike.postTitle}"`;
      } else {
        document.getElementById('myLikesRecent').textContent = 'ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
      }
      
      if (activity.commentLikes.length > 0) {
        const recentCommentLike = activity.commentLikes[0];
        const shortContent = recentCommentLike.commentContent.length > 20 ? 
          recentCommentLike.commentContent.substring(0, 20) + '...' : recentCommentLike.commentContent;
        document.getElementById('myCommentLikesRecent').textContent = `ìµœê·¼: "${shortContent}"`;
      } else {
        document.getElementById('myCommentLikesRecent').textContent = 'ì¢‹ì•„ìš”í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
      }
    }

    // í™œë™ íƒ­ ì „í™˜
    function showActivityTab(tabName) {
      // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
      document.querySelectorAll('.activity-tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.activity-tab-content').forEach(content => content.classList.remove('active'));
      
      // ì„ íƒëœ íƒ­ í™œì„±í™”
      event.target.classList.add('active');
      document.getElementById(tabName + 'Tab').classList.add('active');
      
      // í•´ë‹¹ íƒ­ ë‚´ìš© ë¡œë“œ
      loadActivityTabContent(tabName);
    }

    // í™œë™ íƒ­ ë‚´ìš© ë¡œë“œ
    function loadActivityTabContent(tabName) {
      const activity = getMyActivity();
      let listElement, items, emptyMessage;
      
      switch(tabName) {
        case 'posts':
          listElement = document.getElementById('myPostsList');
          items = activity.posts;
          emptyMessage = 'ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
          break;
        case 'comments':
          listElement = document.getElementById('myCommentsList');
          items = activity.comments;
          emptyMessage = 'ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
          break;
        case 'likes':
          listElement = document.getElementById('myLikesList');
          items = activity.likes;
          emptyMessage = 'ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
          break;
        case 'commentLikes':
          listElement = document.getElementById('myCommentLikesList');
          items = activity.commentLikes;
          emptyMessage = 'ì¢‹ì•„ìš”í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
          break;
      }
      
      if (items.length === 0) {
        listElement.innerHTML = `<div class="activity-item-empty">${emptyMessage}</div>`;
        return;
      }
      
      let html = '';
      items.forEach(item => {
        const date = new Date(item.date).toLocaleDateString('ko-KR');
        
        if (tabName === 'posts') {
          html += `
            <div class="activity-item activity-item-clickable" onclick="navigateToPost('${item.id}', 'mypost')">
              <div class="activity-item-title">${item.title}</div>
              <div class="activity-item-content">${item.content.substring(0, 100)}${item.content.length > 100 ? '...' : ''}</div>
              <div class="activity-item-meta">${item.category} Â· ${date} Â· ì¢‹ì•„ìš” ${item.likes}</div>
              <div class="activity-item-arrow">â†’</div>
            </div>
          `;
        } else if (tabName === 'comments') {
          html += `
            <div class="activity-item activity-item-clickable" onclick="navigateToPost('${item.postId}', 'comment', '${item.id}')">
              <div class="activity-item-title">ëŒ“ê¸€: ${item.postTitle}</div>
              <div class="activity-item-content">${item.content}</div>
              <div class="activity-item-meta">${date}</div>
              <div class="activity-item-arrow">â†’</div>
            </div>
          `;
        } else if (tabName === 'likes') {
          html += `
            <div class="activity-item activity-item-clickable" onclick="navigateToPost('${item.postId}', 'like')">
              <div class="activity-item-title">${item.postTitle}</div>
              <div class="activity-item-content">ì‘ì„±ì: ${item.postAuthor}</div>
              <div class="activity-item-meta">${date}</div>
              <div class="activity-item-arrow">â†’</div>
            </div>
          `;
        } else if (tabName === 'commentLikes') {
          html += `
            <div class="activity-item activity-item-clickable" onclick="navigateToPost('${item.postId}', 'commentLike', '${item.commentId}')">
              <div class="activity-item-title">ëŒ“ê¸€ ì¢‹ì•„ìš”: ${item.commentContent}</div>
              <div class="activity-item-content">ì‘ì„±ì: ${item.commentAuthor}</div>
              <div class="activity-item-meta">${date}</div>
              <div class="activity-item-arrow">â†’</div>
            </div>
          `;
        }
      });
      
      listElement.innerHTML = html;
    }

    // ëª¨ë‹¬ ì—´ê¸° ì‹œ í™œë™ íƒ­ ë‚´ìš© ë¡œë“œ
    function openModal(modalId) {
      document.getElementById(modalId).style.display = 'flex';
      
      if (modalId === 'profileModal') {
        const anonProfile = JSON.parse(localStorage.getItem('anonProfile') || 'null');
        if (anonProfile) {
          document.getElementById('editAnonNickname').value = anonProfile.nickname || '';
          document.getElementById('editAnonYear').value = anonProfile.year || '';
          document.getElementById('editAnonBio').value = anonProfile.bio || '';
          
          // ì„±ë³„ ì„ íƒ ë³µì›
          const genderBtns = document.querySelectorAll('.gender-btn');
          genderBtns.forEach(btn => btn.classList.remove('active'));
          const selectedGenderBtn = document.querySelector(`[data-gender="${anonProfile.gender}"]`);
          if (selectedGenderBtn) selectedGenderBtn.classList.add('active');
          
          // ê´€ì‹¬ì‚¬ ì„ íƒ ë³µì›
          const interestChips = document.querySelectorAll('.interest-chip');
          interestChips.forEach(chip => chip.classList.remove('selected'));
          if (anonProfile.interests) {
            anonProfile.interests.forEach(interest => {
              const chip = document.querySelector(`[data-value="${interest}"]`);
              if (chip) chip.classList.add('selected');
            });
          }
        }
      } else if (modalId === 'activityModal') {
        // ì²« ë²ˆì§¸ íƒ­(ë‚´ ê¸€) ë‚´ìš© ë¡œë“œ
        loadActivityTabContent('posts');
      }
    }

    // ê²Œì‹œíŒìœ¼ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
    function navigateToPost(postId, type, commentId = null) {
      // URL íŒŒë¼ë¯¸í„° ìƒì„±
      const params = new URLSearchParams();
      params.set('postId', postId);
      params.set('source', 'mypage');
      params.set('type', type);
      
      if (commentId) {
        params.set('commentId', commentId);
      }
      
      // ê²Œì‹œíŒ í˜ì´ì§€ë¡œ ì´ë™ (íŒŒë¼ë¯¸í„° í¬í•¨)
      const boardUrl = `/boards?${params.toString()}`;
      
      console.log(`ê²Œì‹œíŒìœ¼ë¡œ ì´ë™: ${boardUrl}`);
      
      // ê°™ì€ íƒ­ì—ì„œ ì´ë™
      window.location.href = boardUrl;
    }

    // ê²Œì‹œíŒì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” URL íŒŒë¼ë¯¸í„° íŒŒì‹± í•¨ìˆ˜
    function getUrlParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        postId: params.get('postId'),
        source: params.get('source'),
        type: params.get('type'),
        commentId: params.get('commentId')
      };
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì •ë³´ í‘œì‹œ
    document.addEventListener('DOMContentLoaded', function() {
      // ë…„ë„ ì„¤ì •
      document.getElementById('year').textContent = new Date().getFullYear();
      
      // Flask ì„¸ì…˜ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ localStorageì— ì €ì¥
      {% if session.user %}
      try {
        const sessionUser = {
          name: "{{ session.user.name }}",
          studentId: "{{ session.user.student_id }}",
          birthday: "{{ session.user.birthday }}",
          gender: "{{ session.user.gender }}",
          status: "{{ session.user.status }}",
          email: "{{ session.user.email }}"
        };
        
        // currentUser ì„¤ì • (ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ í•™ë²ˆ)
        localStorage.setItem('currentUser', sessionUser.studentId);
        
        // userProfile ì €ì¥ (ë§ˆì´í˜ì´ì§€ í‘œì‹œìš©)
        localStorage.setItem('userProfile', JSON.stringify(sessionUser));
        
        console.log('ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ê°€ localStorageì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤:', sessionUser);
      } catch (e) {
        console.error('ì‚¬ìš©ì ì •ë³´ localStorage ì €ì¥ ì‹¤íŒ¨:', e);
      }
      {% endif %}
      
      // ì„œë²„ì—ì„œ ë°›ì€ ìµëª… í”„ë¡œí•„ì´ ìˆìœ¼ë©´ localStorageì— ì €ì¥
      {% if anon_profile %}
      const serverAnonProfile = {{ anon_profile|tojson }};
      if (serverAnonProfile && Object.keys(serverAnonProfile).length > 0) {
        localStorage.setItem('anonProfile', JSON.stringify(serverAnonProfile));
        console.log('ì„œë²„ ìµëª… í”„ë¡œí•„ì„ localStorageì— ì €ì¥:', serverAnonProfile);
      } else {
        // ì„œë²„ì— í”„ë¡œí•„ì´ ì—†ìœ¼ë©´ localStorageì˜ ì´ì „ í”„ë¡œí•„ ì‚­ì œ
        localStorage.removeItem('anonProfile');
        console.log('ì„œë²„ì— ìµëª… í”„ë¡œí•„ì´ ì—†ì–´ localStorageì—ì„œ ì‚­ì œ');
      }
      {% else %}
      // ì„œë²„ì— í”„ë¡œí•„ì´ ì—†ìœ¼ë©´ localStorageì˜ ì´ì „ í”„ë¡œí•„ ì‚­ì œ
      localStorage.removeItem('anonProfile');
      console.log('ì„œë²„ì— ìµëª… í”„ë¡œí•„ì´ ì—†ì–´ localStorageì—ì„œ ì‚­ì œ');
      {% endif %}
      
      loadAnonProfile();
      loadUserProfile();
      loadMyActivity();
      
      // í˜ì´ì§€ í¬ì»¤ìŠ¤ ì‹œ ìµëª… í”„ë¡œí•„ ë‹¤ì‹œ ë¡œë“œ (ëœë¤ì±„íŒ…ì—ì„œ ìˆ˜ì • í›„ ëŒì•„ì™”ì„ ë•Œ)
      window.addEventListener('focus', function() {
        loadAnonProfile();
        console.log('[í˜ì´ì§€ í¬ì»¤ìŠ¤] ìµëª… í”„ë¡œí•„ ë‹¤ì‹œ ë¡œë“œë¨');
      });
      
      // í˜ì´ì§€ ë³´ì´ê¸° ì´ë²¤íŠ¸ (íƒ­ ì „í™˜ ì‹œ)
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
          loadAnonProfile();
          console.log('[í˜ì´ì§€ ê°€ì‹œí™”] ìµëª… í”„ë¡œí•„ ë‹¤ì‹œ ë¡œë“œë¨');
        }
      });
    });

    // ë¡œê·¸ì•„ì›ƒ
    function handleLogout() {
      if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        // localStorage ì™„ì „ ì´ˆê¸°í™”
        localStorage.removeItem('isLoggedIn');
        localStorage.removeItem('currentUser');
        localStorage.removeItem('userProfile');
        localStorage.removeItem('anonProfile'); // ìµëª… í”„ë¡œí•„ ì‚­ì œ
        // activity ë°ì´í„°ëŠ” í•™ë²ˆë³„ë¡œ ì €ì¥ë˜ë¯€ë¡œ ìœ ì§€
        
        // ì„œë²„ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
        window.location.href = "{{ url_for('logout') }}";
      }
    }

    // íšŒì› íƒˆí‡´
    async function handleDeleteAccount() {
      try {
        // ìµœì¢… í™•ì¸
        const confirmed = confirm('ì •ë§ë¡œ íšŒì› íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.');
        if (!confirmed) {
          return;
        }
        
        // ì„œë²„ì— íƒˆí‡´ ìš”ì²­
        const response = await fetch("{{ url_for('delete_account') }}", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          }
        });
        
        const result = await response.json();
        
        if (result.success) {
          // localStorageì˜ ëª¨ë“  ë°ì´í„° ì‚­ì œ
          const currentUser = localStorage.getItem('currentUser');
          if (currentUser) {
            // ì‚¬ìš©ìë³„ ë°ì´í„° ì‚­ì œ
            localStorage.removeItem(`activity_${currentUser}`);
            localStorage.removeItem('anonProfile');
            localStorage.removeItem('userProfile');
            localStorage.removeItem('currentUser');
            localStorage.removeItem('isLoggedIn');
          }
          
          // ì±„íŒ… ê´€ë ¨ ë°ì´í„° ì‚­ì œ
          localStorage.removeItem('chatData');
          localStorage.removeItem('leftRooms');
          localStorage.removeItem('randomProfiles');
          localStorage.removeItem('groupMatchingQueue');
          
          // ê²Œì‹œíŒ ê´€ë ¨ ë°ì´í„° ì‚­ì œ
          localStorage.removeItem('boardPosts');
          localStorage.removeItem('boardComments');
          
          // ê¸°íƒ€ ê´€ë ¨ ë°ì´í„° ì‚­ì œ
          const keysToRemove = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && (key.startsWith('activity_') || key.includes('user') || key.includes('profile') || key.includes('chat') || key.includes('room'))) {
              keysToRemove.push(key);
            }
          }
          keysToRemove.forEach(key => localStorage.removeItem(key));
          
          console.log('[íšŒì› íƒˆí‡´] ëª¨ë“  ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ ì™„ë£Œ');
          
          // ëª¨ë‹¬ ë‹«ê¸°
          closeModal('deleteModal');
          
          // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
          alert(result.message);
          
          // í™ˆí˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸
          window.location.href = result.redirect || "{{ url_for('index') }}";
        } else {
          alert(result.message || 'íšŒì› íƒˆí‡´ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('íšŒì› íƒˆí‡´ ì˜¤ë¥˜:', error);
        alert('íšŒì› íƒˆí‡´ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    }

    // ì´ìš© ì•ˆë‚´ ë‚´ìš© ë°ì´í„°
    const infoData = {
      contact: {
        title: 'ë¬¸ì˜í•˜ê¸°',
        content: `
          <p>ì„œë¹„ìŠ¤ ì´ìš© ì¤‘ ê¶ê¸ˆí•œ ì ì´ ìˆë‹¤ë©´ ì•„ë˜ ì±„ë„ë¡œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.</p>
          <p class="muted">ì´ë©”ì¼: an5192@bible.ac.kr Â· ìš´ì˜ì‹œê°„: í‰ì¼ 09:00â€“18:00</p>
        `
      },
      notice: {
        title: 'ê³µì§€ì‚¬í•­',
        content: `
          <p>ì—…ë°ì´íŠ¸ ë° ì ê²€ ì¼ì •ì„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</p>
          <p class="muted">ì¤‘ìš” ê³µì§€ëŠ” ë§ˆì´í˜ì´ì§€ > ì•Œë¦¼ì—ë„ í‘œì‹œë©ë‹ˆë‹¤.</p>
        `
      },
      tos: {
        title: 'ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€',
        content: `
          <div id="tosSummary">
            <p style="margin-bottom: 4px;">ì„œë¹„ìŠ¤ ì‚¬ìš©ì„ ìœ„í•œ ê¸°ë³¸ ê·œì •ê³¼ íšŒì›ì˜ ê¶Œë¦¬Â·ì˜ë¬´ë¥¼ ê·œì •í•©ë‹ˆë‹¤.</p>
            <p class="muted" style="margin-bottom: 4px;">ìì„¸í•œ ì „ë¬¸ì€ 'ì „ì²´ ì•½ê´€ ë³´ê¸°'ì—ì„œ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>
            <button onclick="toggleTosDetail()" style="margin-top: 12px; padding: 8px 16px; background: linear-gradient(135deg, #FF9F80, #FFC8B2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ì „ì²´ ë‚´ìš© ë³´ê¸°
            </button>
          </div>
          <div id="tosDetail" style="display: none; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
            <h4 style="font-size: 16px; font-weight: 700; color: #1F2937; margin: 0 0 8px 0;">ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ì „ë¬¸</h4>
            <p style="font-size: 12px; color: #6B7280; margin-bottom: 8px; font-style: italic;">â†“ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">1. ëª©ì </h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë³¸ ì•½ê´€ì€ (ì£¼ì‹íšŒì‚¬ â—‹â—‹â—‹)(ì´í•˜ "íšŒì‚¬")ê°€ ì œê³µí•˜ëŠ” (KBU Hub) ì„œë¹„ìŠ¤(ì´í•˜ "ì„œë¹„ìŠ¤")ì˜ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬ íšŒì‚¬ì™€ íšŒì› ê°„ì˜ ê¶Œë¦¬Â·ì˜ë¬´ ë° ì±…ì„ì‚¬í•­, ê¸°íƒ€ í•„ìš”í•œ ì‚¬í•­ì„ ê·œì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">2. ìš©ì–´ì˜ ì •ì˜</h5>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>"íšŒì›":</strong> ì•½ê´€ì— ë™ì˜í•˜ê³  ê³„ì •ì„ ìƒì„±í•˜ì—¬ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ì</p>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>"ë¹„íšŒì›":</strong> ê³„ì • ì—†ì´ ì¼ë¶€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ì</p>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>"ì½˜í…ì¸ ":</strong> ì„œë¹„ìŠ¤ ìƒì— ê²Œì‹œÂ·ì „ì†¡ë˜ëŠ” ê¸€, ì´ë¯¸ì§€, ì˜ìƒ, íŒŒì¼ ë“± ì¼ì²´</p>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>"ìœ ë£Œì„œë¹„ìŠ¤":</strong> ìœ ìƒìœ¼ë¡œ ì œê³µë˜ëŠ” êµ¬ë…Â·ì•„ì´í…œ ë“±</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">3. ì•½ê´€ì˜ ê²Œì‹œì™€ ê°œì •</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ì•½ê´€ì„ ì„œë¹„ìŠ¤ ë‚´ì— ê²Œì‹œí•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê´€ë ¨ ë²•ë ¹ ê°œì • ë˜ëŠ” ì„œë¹„ìŠ¤ ì •ì±… ë³€ê²½ ì‹œ ì•½ê´€ì„ ê°œì •í•  ìˆ˜ ìˆìœ¼ë©°, ì¤‘ìš” ë³€ê²½ì€ ì‹œí–‰ ìµœì†Œ 7ì¼ ì „(íšŒì›ì—ê²Œ ë¶ˆë¦¬í•œ ê²½ìš° 30ì¼ ì „) ê³µì§€í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë³€ê²½ íš¨ë ¥ ë°œìƒì¼ ì´í›„ì—ë„ ì„œë¹„ìŠ¤ë¥¼ ê³„ì† ì´ìš©í•˜ë©´ ê°œì • ì•½ê´€ì— ë™ì˜í•œ ê²ƒìœ¼ë¡œ ë´…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">4. ì•½ê´€ ì™¸ ì¤€ì¹™</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì•½ê´€ì— ëª…ì‹œë˜ì§€ ì•Šì€ ì‚¬í•­ì€ ê´€ë ¨ ë²•ë ¹, ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨, ê°œë³„ ìš´ì˜ì •ì±… ë° ì•ˆë‚´ì— ë”°ë¦…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">5. íšŒì›ê°€ì… ë° ê³„ì •</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì›ì€ íšŒì‚¬ê°€ ì •í•œ ì ˆì°¨ì— ë”°ë¼ ê°€ì…í•˜ë©°, í•™ë²ˆ/í•™êµ ì´ë©”ì¼ ë“± ì‹¤ì œ ì •ë³´ë¥¼ ì •í™•íˆ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ 14ì„¸ ë¯¸ë§Œì€ ë²•ì •ëŒ€ë¦¬ì¸ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤. (ì„œë¹„ìŠ¤ íŠ¹ì„±ìƒ ëŒ€ìƒ ì œí•œ ì‹œ "ì²­ì†Œë…„ ì´ìš© ì œí•œ"ì„ ëª…ì‹œ)</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê³„ì • ë³´ì•ˆì€ íšŒì› ì±…ì„ì´ë©°, ì œ3ì ì´ìš©ì„ í—ˆìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ìƒ ì‚¬ìš© ë°œê²¬ ì‹œ ì¦‰ì‹œ íšŒì‚¬ì— ì•Œë¦½ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ë‹¤ìŒ ì‚¬ìœ ê°€ ìˆì„ ê²½ìš° ê°€ì…ì„ ê±°ë¶€Â·ìœ ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤: íƒ€ì¸ì˜ ì •ë³´ ë„ìš©, í—ˆìœ„ ì •ë³´, ì„¤ë¹„ ì—¬ë ¥ ë¶€ì¡±, ê¸°íƒ€ ë²•ë ¹ ìœ„ë°˜ ë“±.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">6. ì„œë¹„ìŠ¤ì˜ ì œê³µ ë° ë³€ê²½</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ì„œë¹„ìŠ¤ì˜ ë‚´ìš©, ìš´ì˜ ì‹œê°„, ê¸°ìˆ  ì‚¬ì–‘ì„ ì •í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìš´ì˜Â·ë³´ì•ˆ ì ê²€, ì„¤ë¹„ êµì²´, ì¥ì•  ë°œìƒ ë“± ì‚¬ìœ ë¡œ ì„œë¹„ìŠ¤ ì œê³µì´ ì¼ì‹œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìœ¼ë©°, ê°€ëŠ¥í•œ í•œ ì‚¬ì „ ê³µì§€í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ì„œë¹„ìŠ¤ ì „ë¶€ ë˜ëŠ” ì¼ë¶€ë¥¼ ë³€ê²½Â·ì¤‘ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ ë£Œì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì‹œ ì”ì—¬ ì´ìš©ë£Œ í™˜ë¶ˆ ê¸°ì¤€ì„ ê³µì§€Â·ì ìš©í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">7. ì´ìš©ìì˜ ì˜ë¬´(ê¸ˆì§€í–‰ìœ„)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì›ì€ ë‹¤ìŒ í–‰ìœ„ë¥¼ í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íƒ€ì¸ì˜ ê³„ì •Â·ê°œì¸ì •ë³´ ë„ìš©, í—ˆìœ„ ì •ë³´ ë“±ë¡</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì €ì‘ê¶ŒÂ·ìƒí‘œê¶Œ ë“± ì œ3ìì˜ ê¶Œë¦¬ ì¹¨í•´, ë¶ˆë²• ë³µì œÂ·ê³µìœ </p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìŒë€ë¬¼Â·í­ë ¥ë¬¼Â·ë„ë°•Â·ë§ˆì•½Â·ìì‚´Â·ìí•´ ìœ ë„ ë“± ìœ í•´/ë¶ˆë²• ì •ë³´ ìœ í†µ</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì°¨ë³„Â·í˜ì˜¤Â·ê´´ë¡­í˜, ëª…ì˜ˆí›¼ì†, ê°œì¸ì •ë³´ ë…¸ì¶œ, íƒ€ì¸ ì‚¬ì¹­</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì„œë¹„ìŠ¤ êµ¬ì¡°ë¥¼ í•´í‚¹Â·ì—­ì„¤ê³„Â·ìë™í™” ìˆ˜ì§‘(í¬ë¡¤ë§)í•˜ëŠ” í–‰ìœ„</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìŠ¤íŒ¸Â·ê´‘ê³ ì„± ì •ë³´ ë¬´ë‹¨ ì „ì†¡, ì„œë¹„ìŠ¤ ìš´ì˜ ë°©í•´</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê´€ë ¨ ë²•ë ¹, ì•½ê´€, ìš´ì˜ì •ì±… ìœ„ë°˜ í–‰ìœ„</p>
            <p style="font-size: 14px; margin-bottom: 4px;">ìœ„ë°˜ ì‹œ íšŒì‚¬ëŠ” ê²Œì‹œë¬¼ ì„ì‹œì¡°ì¹˜/ì‚­ì œ, ì´ìš© ì œí•œ/í•´ì§€, ìˆ˜ì‚¬ê¸°ê´€ í†µë³´ ë“±ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">8. íšŒì›ì˜ ì½˜í…ì¸ </h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì›ì´ ì„œë¹„ìŠ¤ì— ê²Œì‹œí•œ ì½˜í…ì¸ ì˜ ì €ì‘ê¶Œì€ íšŒì›ì—ê²Œ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì›ì€ íšŒì‚¬ì— ëŒ€í•´ ì„œë¹„ìŠ¤ ìš´ì˜Â·ê°œì„ Â·ë…¸ì¶œ(ê²€ìƒ‰Â·ì¶”ì²œ í¬í•¨)ì„ ìœ„í•œ ë²”ìœ„ ë‚´ì—ì„œ ë¹„ë…ì ì Â·ë¬´ìƒÂ·ì¬ë¼ì´ì„ ìŠ¤ ê°€ëŠ¥í•œ ì‚¬ìš©ê¶Œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ê´€ë ¨ ë²•ë ¹, ê¶Œë¦¬ ì¹¨í•´ ì‹ ê³ , ì•½ê´€ ìœ„ë°˜ ì†Œì§€ê°€ ìˆëŠ” ì½˜í…ì¸ ë¥¼ ì‚¬ì „ í†µì§€ ì—†ì´ ì œí•œÂ·ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">9. ì œ3ì ì„œë¹„ìŠ¤ ë° ë§í¬</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì„œë¹„ìŠ¤ì—ëŠ” ì™¸ë¶€ ì‚¬ì´íŠ¸Â·ì„œë¹„ìŠ¤ ë§í¬ê°€ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë©°, í•´ë‹¹ ì˜ì—­ì€ ê° ì œê³µì ì±…ì„ì…ë‹ˆë‹¤. íšŒì›ì€ ì œ3ì ì•½ê´€ê³¼ ì •ì±…ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">10. ìœ ë£Œì„œë¹„ìŠ¤, ê²°ì œ ë° í™˜ë¶ˆ(í•´ë‹¹ ì‹œ)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê°€ê²©Â·ê³¼ê¸ˆ ë°©ì‹Â·í™˜ë¶ˆ ê¸°ì¤€ì€ ì„œë¹„ìŠ¤ ë‚´ì— ë³„ë„ ê³ ì§€í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì²­ì•½ì² íšŒê°€ ê°€ëŠ¥í•œ ì¬í™”ëŠ” ê´€ë ¨ ë²•ë ¹ ë° ê³ ì§€ ê¸°ì¤€ì— ë”°ë¼ í™˜ë¶ˆí•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë¶€ì • ê²°ì œÂ·ê³„ì • ê³µìœ  ë“± ìœ„ë°˜ì´ í™•ì¸ë˜ë©´ ì´ìš©ì„ ì œí•œí•˜ê³  ë¹„ìš©ì„ ì²­êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">11. ê°œì¸ì •ë³´ ë³´í˜¸</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì‚¬ëŠ” ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ í•„ìš”í•œ ë²”ìœ„ì—ì„œ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘Â·ì´ìš©í•˜ë©°, ì„¸ë¶€ ì‚¬í•­ì€ ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì— ë”°ë¦…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">12. ì²­ì†Œë…„ ë³´í˜¸</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì²­ì†Œë…„ ìœ í•´ì •ë³´ ì°¨ë‹¨Â·ì‹ ê³  ì²˜ë¦¬Â·ê´€ë¦¬ì êµìœ¡ ë“±ì€ ì²­ì†Œë…„ ë³´í˜¸ ì •ì±…ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">13. ì„œë¹„ìŠ¤ì˜ ì±…ì„ ì œí•œ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ì²œì¬ì§€ë³€, ì „ìŸ, í…ŒëŸ¬, íŒŒì—…, ì •ë¶€ ê·œì œ, í†µì‹ ë§ ì¥ì•  ë“± ë¶ˆê°€í•­ë ¥ìœ¼ë¡œ ì¸í•œ ì†í•´ì— ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” íšŒì› ìƒí˜¸ ê°„ ë˜ëŠ” íšŒì›ê³¼ ì œ3ì ê°„ì˜ ë¶„ìŸì— ê°œì…í•˜ì§€ ì•Šìœ¼ë©°, ê·¸ë¡œ ì¸í•œ ì†í•´ë¥¼ ë°°ìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” í•©ë¦¬ì  ì£¼ì˜ë¥¼ ë‹¤í–ˆìŒì—ë„ ë°œìƒí•œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨, ì˜¤ë¥˜, ë°ì´í„° ì†ì‹¤ ë“±ì— ëŒ€í•´ ì¤‘ëŒ€í•œ ê³¼ì‹¤ì´ ì—†ëŠ” í•œ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">14. ë³´ì¦ì˜ ë¶€ì¸</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì„œë¹„ìŠ¤ëŠ” "ìˆëŠ” ê·¸ëŒ€ë¡œ" ì œê³µë©ë‹ˆë‹¤. íšŒì‚¬ëŠ” ì„œë¹„ìŠ¤ì˜ íŠ¹ì • ëª©ì  ì í•©ì„±, ì •í™•ì„±, ë¬´ì˜¤ë¥˜, ë¹„ì¹¨í•´ì„±ì— ëŒ€í•´ ëª…ì‹œì Â·ë¬µì‹œì  ë³´ì¦ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤(ë²•ë ¹ì´ í—ˆìš©í•˜ëŠ” ë²”ìœ„ ë‚´).</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">15. ì†í•´ë°°ìƒ ë° ë©´ì±…</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì›ì´ ì•½ê´€ ìœ„ë°˜ ë˜ëŠ” ë¶ˆë²• í–‰ìœ„ë¡œ íšŒì‚¬ì— ì†í•´ë¥¼ ë¼ì¹œ ê²½ìš° ê·¸ ì†í•´ë¥¼ ë°°ìƒí•´ì•¼ í•©ë‹ˆë‹¤. ì œ3ìì˜ í´ë ˆì„(ì €ì‘ê¶Œ ë“±)ìœ¼ë¡œ íšŒì‚¬ì— ë¹„ìš©ì´ ë°œìƒí•˜ë©´ íšŒì›ì€ íšŒì‚¬ì˜ ì†ì‹¤ì„ ë©´ì±…í•´ì•¼ í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">16. ì´ìš©ê³„ì•½ í•´ì§€(íƒˆí‡´) ë° ì œí•œ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì›ì€ ì–¸ì œë“ ì§€ ê³„ì •ì„ ìê¸° ì±…ì„ í•˜ì— íƒˆí‡´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ì•½ê´€Â·ë²•ë ¹ ìœ„ë°˜, ì¥ê¸° ë¯¸ì ‘ì†, ìš´ì˜ ë°©í•´ ë“± ì‚¬ìœ ê°€ ìˆëŠ” ê²½ìš° ì‚¬ì „ í†µì§€ í›„ ì´ìš©ì„ ì œí•œí•˜ê±°ë‚˜ ê³„ì•½ì„ í•´ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê¸´ê¸‰í•œ ê²½ìš° ì‚¬í›„ í†µì§€).</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ í•´ì§€ ì‹œ ë²•ë ¹Â·ì •ì±…ì— ë”°ë¼ í•„ìš”í•œ ì •ë³´ëŠ” ì¼ì • ê¸°ê°„ ë³´ê´€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">17. í†µì§€</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ì˜ íšŒì›ì— ëŒ€í•œ í†µì§€ëŠ” ì„œë¹„ìŠ¤ ë‚´ ì•Œë¦¼, ë“±ë¡ëœ ì´ë©”ì¼/ë¬¸ì ë“±ìœ¼ë¡œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë‹¤ìˆ˜ íšŒì›ì—ê²Œ í†µì§€í•˜ëŠ” ê²½ìš° ì„œë¹„ìŠ¤ ë‚´ ê³µì§€ë¡œ ê°ˆìŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">18. ì¤€ê±°ë²• ë° ì¬íŒê´€í• </h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë³¸ ì•½ê´€ì€ ëŒ€í•œë¯¼êµ­ ë²•ë ¹ì— ë”°ë¦…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬ ë¶„ìŸì´ ë°œìƒí•œ ê²½ìš°, ì„œìš¸ì¤‘ì•™ì§€ë°©ë²•ì›ì„ ì œ1ì‹¬ ì „ì† ê´€í•  ë²•ì›ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">19. ë¶„ìŸ í•´ê²°(ì„ íƒ)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì‚¬ì™€ íšŒì›ì€ ë¶„ìŸ ë°œìƒ ì‹œ ì†Œì†¡ ì œê¸° ì „ ê³ ê°ì„¼í„°ë¥¼ í†µí•œ í˜‘ì˜ë¥¼ ìš°ì„  ì‹œë„í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">20. ì•½ê´€ì˜ í•´ì„</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì•½ê´€ ì¡°í•­ì´ ë¬´íš¨Â·ì§‘í–‰ ë¶ˆëŠ¥ì¸ ê²½ìš°ì—ë„ ë‚˜ë¨¸ì§€ ì¡°í•­ì€ ê³„ì† ìœ íš¨í•©ë‹ˆë‹¤. íšŒì‚¬ê°€ ê¶Œë¦¬ë¥¼ í–‰ì‚¬í•˜ì§€ ì•Šì€ ê²½ìš° ì´ëŠ” ê¶Œë¦¬ì˜ í¬ê¸°ë¥¼ ì˜ë¯¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">21. ë¶€ì¹™</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë³¸ ì•½ê´€ì€ 20XXë…„ XXì›” XXì¼ë¶€í„° ì‹œí–‰í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì´ì „ ì•½ê´€ì€ ë³¸ ì•½ê´€ìœ¼ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤.</p>
            
            <button onclick="toggleTosDetail()" style="margin-top: 16px; padding: 8px 16px; background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ìš”ì•½ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
        `
      },
      privacy: {
        title: 'ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨',
        content: `
          <div id="privacySummary">
            <p style="margin-bottom: 4px;">ìˆ˜ì§‘ í•­ëª©Â·ì´ìš© ëª©ì Â·ë³´ê´€ ê¸°ê°„ ë° íŒŒê¸° ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
            <p class="muted" style="margin-bottom: 4px;">ì•ˆì „í•œ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì•”í˜¸í™” ë° ì ‘ê·¼ í†µì œë¥¼ ì ìš©í•©ë‹ˆë‹¤.</p>
            <button onclick="togglePrivacyDetail()" style="margin-top: 12px; padding: 8px 16px; background: linear-gradient(135deg, #FF9F80, #FFC8B2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ì „ì²´ ë‚´ìš© ë³´ê¸°
            </button>
          </div>
          <div id="privacyDetail" style="display: none; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
            <h4 style="font-size: 16px; font-weight: 700; color: #1F2937; margin: 0 0 8px 0;">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ì „ë¬¸</h4>
            <p style="font-size: 12px; color: #6B7280; margin-bottom: 8px; font-style: italic;">â†“ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">1. ì´ì¹™</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">(ì£¼ì‹íšŒì‚¬ â—‹â—‹â—‹)(ì´í•˜ "íšŒì‚¬")ëŠ” ã€Œê°œì¸ì •ë³´ ë³´í˜¸ë²•ã€ ë“± ê´€ë ¨ ë²•ë ¹ì„ ì¤€ìˆ˜í•˜ë©°, ì´ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬ë°©ì¹¨ì„ ìˆ˜ë¦½Â·ê³µê°œí•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">2. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©ê³¼ ë°©ë²•</h5>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>2-1) ìˆ˜ì§‘ í•­ëª©</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>íšŒì›ê°€ì… í•„ìˆ˜:</strong> ì´ë¦„, í•™ë²ˆ(ì•„ì´ë””), ìƒë…„ì›”ì¼, ì„±ë³„, ì¬í•™ ìƒíƒœ, í•™êµ ì´ë©”ì¼(@bible.ac.kr), ë¹„ë°€ë²ˆí˜¸(í•´ì‹œ í˜•íƒœ), ë³¸ì¸ ì‹ë³„ê°’(ë‚´ë¶€ ID)</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì„œë¹„ìŠ¤ ì´ìš© ê³¼ì •:</strong> ì ‘ì† ì¼ì‹œ/ë¡œê·¸(ë¡œê·¸ì¸Â·ë¡œê·¸ì•„ì›ƒ ê¸°ë¡), IP, ì¿ í‚¤, ê¸°ê¸°/ë¸Œë¼ìš°ì € ì •ë³´</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê³ ê°ë¬¸ì˜(ì„ íƒ):</strong> ì—°ë½ì²˜, ë¬¸ì˜ ë‚´ìš©, ì²¨ë¶€íŒŒì¼</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì´ë²¤íŠ¸/ë§ˆì¼€íŒ…(ì„ íƒ):</strong> ìˆ˜ì‹  ë™ì˜ ì—¬ë¶€, ì°¸ì—¬ ê¸°ë¡</p>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>2-2) ìˆ˜ì§‘ ë°©ë²•</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì›ê°€ì…Â·ë§ˆì´í˜ì´ì§€ ë“± ì„œë¹„ìŠ¤ í™”ë©´ì„ í†µí•œ ì§ì ‘ ì…ë ¥</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì„œë¹„ìŠ¤ ì´ìš© ì¤‘ ìë™ ìƒì„±Â·ìˆ˜ì§‘(ì ‘ì† ë¡œê·¸, ì¿ í‚¤ ë“±)</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê³ ê°ì„¼í„°/ë¬¸ì˜ ë©”ì¼ ì ‘ìˆ˜</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">3. ì²˜ë¦¬ ëª©ì </h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>íšŒì› ê´€ë¦¬:</strong> ê°€ì… ì˜ì‚¬ í™•ì¸, ë³¸ì¸ ì‹ë³„/ì¸ì¦, ë¶€ì • ì´ìš© ë°©ì§€, ë¯¼ì› ì²˜ë¦¬</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì„œë¹„ìŠ¤ ì œê³µ/ìš´ì˜:</strong> ê²Œì‹œíŒÂ·ë§ˆì´í˜ì´ì§€ ë“± í•µì‹¬ ê¸°ëŠ¥ ì œê³µ, í’ˆì§ˆ ê°œì„ , í†µê³„Â·ë¶„ì„</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë³´ì•ˆ/ì•ˆì „:</strong> ì´ìƒ ë¡œê·¸ì¸ íƒì§€, ì„œë¹„ìŠ¤ ì•ˆì •ì„± í™•ë³´</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê³ ì§€/í†µì§€:</strong> ì„œë¹„ìŠ¤ ë³€ê²½, ì•½ê´€Â·ì •ì±… ê°œì • ì•ˆë‚´</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë§ˆì¼€íŒ…/ì´ë²¤íŠ¸(ì„ íƒ):</strong> ì†Œì‹ì§€ ë°œì†¡, ì´ë²¤íŠ¸ ìš´ì˜(ìˆ˜ì‹  ë™ì˜í•œ ê²½ìš°ì— í•œí•¨)</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">4. ì²˜ë¦¬ ë° ë³´ìœ  ê¸°ê°„</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>íšŒì›ì •ë³´:</strong> íšŒì› íƒˆí‡´ ì‹œê¹Œì§€ ë³´ê´€, ë‹¤ë§Œ ê´€ë ¨ ë²•ë ¹ì— ë”°ë¥¸ ì˜ë¬´ ë³´ì¡´ ê¸°ê°„ì´ ìˆëŠ” ê²½ìš° í•´ë‹¹ ê¸°ê°„ê¹Œì§€ ë³´ê´€</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ (ì˜ˆì‹œ) ê³„ì•½Â·ëŒ€ê¸ˆê²°ì œÂ·ì¬í™”ê³µê¸‰ ê¸°ë¡: 5ë…„ / ì†Œë¹„ì ë¶ˆë§ŒÂ·ë¶„ìŸ ì²˜ë¦¬: 3ë…„ / í‘œì‹œÂ·ê´‘ê³  ê¸°ë¡: 6ê°œì›”</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì ‘ì† ë¡œê·¸/ê¸°ê¸°ì •ë³´:</strong> ë³´ì•ˆÂ·ìš´ì˜ ëª©ì  ë‹¬ì„± ì‹œê¹Œì§€ ë˜ëŠ” ê´€ë ¨ ë²•ë ¹ì´ ì •í•œ ê¸°ê°„</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì´ë²¤íŠ¸Â·ë§ˆì¼€íŒ… ì •ë³´:</strong> ëª©ì  ë‹¬ì„± ì‹œê¹Œì§€ ë˜ëŠ” ë™ì˜ ì² íšŒ ì‹œê¹Œì§€</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">5. ì œ3ì ì œê³µ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì‚¬ëŠ” ì´ìš©ìì˜ ê°œì¸ì •ë³´ë¥¼ ì›ì¹™ì ìœ¼ë¡œ ì œ3ìì—ê²Œ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ë‹¤ìŒ ê²½ìš°ì—ëŠ” ì˜ˆì™¸ë¡œ í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì´ìš©ìê°€ ì‚¬ì „ì— ë™ì˜í•œ ê²½ìš°</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë²•ë ¹ì— ê·¼ê±°í•œ ìˆ˜ì‚¬Â·ì¡°ì‚¬Â·ì¬íŒ ë“± ê³µê³µê¸°ê´€ì˜ ì ë²•í•œ ìš”êµ¬ê°€ ìˆëŠ” ê²½ìš°</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">6. ì²˜ë¦¬ì˜ ìœ„íƒ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì›í™œí•œ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ë‹¤ìŒ ì—…ë¬´ë¥¼ ìœ„íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„íƒ ì‹œ ê°œì¸ì •ë³´ ë³´í˜¸ ê´€ë ¨ ê³„ì•½ ì²´ê²° ë° ê´€ë¦¬Â·ê°ë…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">7. êµ­ì™¸ ì´ì „(í•´ë‹¹ ì‹œ)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì„œë¹„ìŠ¤ ì¸í”„ë¼ ë˜ëŠ” í˜‘ë ¥ì‚¬ê°€ êµ­ì™¸ì— ìˆëŠ” ê²½ìš° ì•„ë˜ ì •ë³´ë¥¼ ê³ ì§€í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">ì´ì „ë°›ëŠ” ì(êµ­ê°€/ì—°ë½ì²˜), ì´ì „ ì¼ì‹œÂ·ë°©ë²•(ìƒì‹œ ì „ì†¡ ë“±), ì´ì „ í•­ëª©, ë³´ìœ Â·ì´ìš© ê¸°ê°„, ë³´í˜¸ ì¡°ì¹˜</p>
            <p style="font-size: 14px; margin-bottom: 4px;">(êµ­ì™¸ ì´ì „ì´ ì—†ë‹¤ë©´ "êµ­ì™¸ ì´ì „ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"ë¼ê³  ëª…ì‹œ)</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">8. ì´ìš©ì ê¶Œë¦¬ì™€ í–‰ì‚¬ ë°©ë²•</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì´ìš©ì(ë° ë²•ì •ëŒ€ë¦¬ì¸)ëŠ” ì–¸ì œë“ ì§€ ìì‹ ì˜ ê°œì¸ì •ë³´ì— ëŒ€í•´ ì—´ëŒÂ·ì •ì •Â·ì‚­ì œÂ·ì²˜ë¦¬ì •ì§€ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë§ˆì´í˜ì´ì§€ì—ì„œ ì§ì ‘ ë³€ê²½ ê°€ëŠ¥í•˜ê±°ë‚˜, ê³ ê°ì„¼í„°/ì´ë©”ì¼ë¡œ ìš”ì²­</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ë²•ë ¹ì— ë”°ë¥¸ ì˜ˆì™¸ ì‚¬ìœ ê°€ ì—†ìœ¼ë©´ ì§€ì²´ ì—†ì´ ì¡°ì¹˜í•˜ê³  ê²°ê³¼ë¥¼ í†µì§€</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë§Œ 14ì„¸ ë¯¸ë§Œ ì•„ë™ì˜ ê²½ìš° ë²•ì •ëŒ€ë¦¬ì¸ì´ ê¶Œë¦¬ë¥¼ í–‰ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">9. ì¿ í‚¤(Cookie)ì˜ ì‚¬ìš©ê³¼ ê±°ë¶€</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ íšŒì‚¬ëŠ” ë§ì¶¤í˜• ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë¸Œë¼ìš°ì € ì„¤ì •(ì¿ í‚¤ ì°¨ë‹¨/ì‚­ì œ)ìœ¼ë¡œ ì €ì¥ì„ ê±°ë¶€í•  ìˆ˜ ìˆìœ¼ë‚˜, ì¼ë¶€ ê¸°ëŠ¥ ì´ìš©ì— ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">10. ê°œì¸ì •ë³´ì˜ íŒŒê¸° ì ˆì°¨ ë° ë°©ë²•</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>íŒŒê¸° ì ˆì°¨:</strong> ë³´ìœ  ê¸°ê°„ ê²½ê³¼/ì²˜ë¦¬ ëª©ì  ë‹¬ì„± í›„ ì§€ì²´ ì—†ì´ íŒŒê¸°. ë‚´ë¶€ ë°©ì¹¨ ë° ë²•ë ¹ì— ë”°ë¼ ì¼ì • ê¸°ê°„ ë³´ê´€ì´ í•„ìš”í•œ ê²½ìš° ë³„ë„ ë¶„ë¦¬ ë³´ê´€ í›„ íŒŒê¸°</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>íŒŒê¸° ë°©ë²•:</strong> ì „ì íŒŒì¼ì€ ë³µêµ¬Â·ì¬ìƒ ë¶ˆê°€ëŠ¥í•œ ê¸°ìˆ ì  ë°©ë²•ìœ¼ë¡œ, ì¶œë ¥ë¬¼ì€ ë¶„ì‡„Â·ì†Œê° ë“± ë¬¼ë¦¬ì  ë°©ë²•ìœ¼ë¡œ íŒŒê¸°</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">11. ì•ˆì „ì„± í™•ë³´ ì¡°ì¹˜</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê´€ë¦¬ì  ì¡°ì¹˜:</strong> ë‚´ë¶€ ê´€ë¦¬ê³„íš ìˆ˜ë¦½Â·ì‹œí–‰, ì§ì› êµìœ¡, ê¶Œí•œ ê´€ë¦¬, ì ‘ê·¼ ê¸°ë¡ ì ê²€</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê¸°ìˆ ì  ì¡°ì¹˜:</strong> ë¹„ë°€ë²ˆí˜¸ ë‹¨ë°©í–¥ ì•”í˜¸í™”(í•´ì‹œ), í†µì‹  êµ¬ê°„ ì•”í˜¸í™”(HTTPS/TLS), ì ‘ê·¼í†µì œ, ì•…ì„±ì½”ë“œ ë°©ì§€, ë¡œê·¸ ëª¨ë‹ˆí„°ë§</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë¬¼ë¦¬ì  ì¡°ì¹˜:</strong> ì „ì‚°ì‹¤/ìë£Œë³´ê´€ì‹¤ ì ‘ê·¼ í†µì œ</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">12. ê°œì¸ì •ë³´ ìë™ìˆ˜ì§‘Â·í”„ë¡œíŒŒì¼ë§(í•´ë‹¹ ì‹œ)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë§ì¶¤ ì¶”ì²œÂ·ìŠ¤íŒ¸ ì°¨ë‹¨ ë“± ìë™í™”ëœ ì˜ì‚¬ê²°ì •ì´ ìˆëŠ” ê²½ìš° ëª©ì Â·ë¡œì§ ê°œìš”Â·ì˜í–¥ ë° ê±°ë¶€ê¶Œ/ëŒ€ì•ˆ ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">(ì—†ë‹¤ë©´ "ìë™í™”ëœ ì˜ì‚¬ê²°ì •ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"ë¼ê³  ëª…ì‹œ)</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">13. ì²­ì†Œë…„ ë³´í˜¸</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì²­ì†Œë…„ ìœ í•´ì •ë³´ ì°¨ë‹¨Â·ì‹ ê³  ì²˜ë¦¬Â·ê´€ë¦¬ì êµìœ¡ ë“±ì€ ì²­ì†Œë…„ ë³´í˜¸ ì •ì±…ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">14. ê°œì¸ì •ë³´ ë³´í˜¸ì±…ì„ì ë° ë¯¼ì› ì²˜ë¦¬</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê°œì¸ì •ë³´ ë³´í˜¸ì±…ì„ì(DPO):</strong> (ì„±ëª… / ì§ì±… / ì´ë©”ì¼ / ì „í™”)</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ê°œì¸ì •ë³´ ë¯¼ì›Â·ì¹¨í•´ ì‹ ê³ :</strong> ê³ ê°ì„¼í„°, ì´ë©”ì¼, ë˜ëŠ” (ê°œì¸ì •ë³´ì¹¨í•´ ì‹ ê³ ì„¼í„° 118 ë“±)</p>
            <p style="font-size: 14px; margin-bottom: 4px;">íšŒì‚¬ëŠ” ë¬¸ì˜ ì ‘ìˆ˜ í›„ ë²•ì • ì²˜ë¦¬ê¸°í•œ ë‚´ ê²°ê³¼ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">15. ê³ ì§€ ì˜ë¬´(ë³€ê²½ ì‹œ í†µì§€)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë²•ë ¹ ë³€ê²½Â·ì„œë¹„ìŠ¤ ê°œí¸ ë“±ìœ¼ë¡œ ì²˜ë¦¬ë°©ì¹¨ì„ ë³€ê²½í•˜ëŠ” ê²½ìš°, ì‹œí–‰ â—‹ì¼ ì „ë¶€í„° ì„œë¹„ìŠ¤ ê³µì§€/ì´ë©”ì¼ ë“±ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤. ì¤‘ìš”í•œ ë³€ê²½ì‚¬í•­ì€ ëª…í™•íˆ í‘œì‹œí•©ë‹ˆë‹¤.</p>
            
            <button onclick="togglePrivacyDetail()" style="margin-top: 16px; padding: 8px 16px; background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ìš”ì•½ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
        `
      },
      youth: {
        title: 'ì²­ì†Œë…„ ë³´í˜¸ ì •ì±…',
        content: `
          <div id="youthSummary">
            <p style="margin-bottom: 4px;">ìœ í•´ ì •ë³´ë¡œë¶€í„° ì²­ì†Œë…„ì„ ë³´í˜¸í•˜ê¸° ìœ„í•œ ê´€ë¦¬Â·í•„í„°ë§ ê¸°ì¤€ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
            <p class="muted" style="margin-bottom: 4px;">ìœ„ë°˜ ì‹ ê³  ì‹œ ìš´ì˜ìê°€ ì‹ ì†íˆ ì¡°ì¹˜í•©ë‹ˆë‹¤.</p>
            <button onclick="toggleYouthDetail()" style="margin-top: 12px; padding: 8px 16px; background: linear-gradient(135deg, #FF9F80, #FFC8B2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ì „ì²´ ë‚´ìš© ë³´ê¸°
            </button>
          </div>
          <div id="youthDetail" style="display: none; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
            <h4 style="font-size: 16px; font-weight: 700; color: #1F2937; margin: 0 0 8px 0;">ì²­ì†Œë…„ ë³´í˜¸ ì •ì±… ì „ë¬¸</h4>
            <p style="font-size: 12px; color: #6B7280; margin-bottom: 8px; font-style: italic;">â†“ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">1. ëª©ì </h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë³¸ ì •ì±…ì€ ë³¸ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µÂ·ìœ í†µë  ìˆ˜ ìˆëŠ” ìœ í•´ì •ë³´ë¡œë¶€í„° ì²­ì†Œë…„ì„ ë³´í˜¸í•˜ê³ , ì˜¬ë°”ë¥¸ ì¸í„°ë„· ì‚¬ìš©í™˜ê²½ì„ ì¡°ì„±í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê¸°ì¤€ê³¼ ì¡°ì¹˜ë¥¼ ì •í•¨ì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">2. ì •ì˜</h5>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>ì²­ì†Œë…„:</strong> ê´€ë ¨ ë²•ë ¹ì—ì„œ ì •í•œ ì²­ì†Œë…„ì— í•´ë‹¹í•˜ëŠ” ì</p>
            <p style="font-size: 14px; margin-bottom: 4px;"><strong>ìœ í•´ì •ë³´:</strong> ì²­ì†Œë…„ì˜ ê±´ì „í•œ ì„±ì¥ì— í•´ë¥¼ ë¼ì¹  ìš°ë ¤ê°€ ìˆëŠ” ì •ë³´(ì˜ˆ: ìŒë€Â·í­ë ¥Â·ë„ë°•Â·ì•½ë¬¼Â·ìì‚´Â·ìí•´ ìœ ë°œÂ·ë¶ˆë²•í–‰ìœ„ ì¡°ì¥ ë“±)</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">3. ìœ í•´ì •ë³´ ì°¨ë‹¨ ë° ë“±ê¸‰ ê´€ë¦¬</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ 19ì„¸ ì´ìƒ ì „ìš© ì½˜í…ì¸ ì—ëŠ” ëª…í™•í•œ ì—°ë ¹ ë“±ê¸‰ í‘œê¸° ë° ì„±ì¸ ì¸ì¦ ì ˆì°¨ë¥¼ ì ìš©í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê²€ìƒ‰/ëª©ë¡/ì¶”ì²œ ì˜ì—­ì—ì„œ ì²­ì†Œë…„ì—ê²Œ ë¶€ì ì ˆí•œ ë…¸ì¶œì„ ì¤„ì´ê¸° ìœ„í•´ í‚¤ì›Œë“œ í•„í„°ë§ ë° ì¹´í…Œê³ ë¦¬ ì œí•œì„ ìš´ì˜í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì´ë¯¸ì§€Â·ì˜ìƒ ì—…ë¡œë“œ ì‹œ ì¸ë„¤ì¼/ë¯¸ë¦¬ë³´ê¸° ëª¨ìì´í¬ ë“± ì‚¬ì „ ì˜ˆë°© ì¡°ì¹˜ë¥¼ ì·¨í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">4. ì ‘ê·¼ ì œí•œ ë° ì‹œê°„ ì œí•œ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì•¼ê°„ ì‹œê°„ëŒ€(ì˜ˆ: 22:00~06:00) íŠ¹ì • ê¸°ëŠ¥(ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¬ë°/ì±„íŒ… ë“±)ì— ëŒ€í•´ ì´ìš© ì œí•œ ë˜ëŠ” ì•ˆë‚´ ê²½ê³ ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìœ„ì¹˜Â·ì—°ë ¹ ê¸°ë°˜ìœ¼ë¡œ ì ‘ê·¼ ì°¨ë‹¨ ë˜ëŠ” ê¸°ëŠ¥ ì¶•ì†Œë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">5. ì‹ ê³ Â·ì‹¬ì˜ ë° ì¡°ì¹˜ ì ˆì°¨</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì‹ ê³  ê¸°ëŠ¥ì„ ì œê³µí•˜ë©°, ì‹ ê³  ì‚¬ìœ (ìŒë€, í­ë ¥, ìí•´, ë¶ˆë²• ë“±) ì„ íƒ ë©”ë‰´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì ‘ìˆ˜ëœ ì‹ ê³ ëŠ” ì˜ì—…ì¼ ê¸°ì¤€ â—‹ì¼ ì´ë‚´ 1ì°¨ ê²€í† , í•„ìš” ì‹œ ì„ì‹œ ì°¨ë‹¨ í›„ ì‚¬ì‹¤ í™•ì¸ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìœ í•´ì„±ì´ í™•ì¸ë˜ë©´ ì‚­ì œ/ë¹„ê³µê°œ/ì—°ë ¹ ì œí•œ/ì´ìš©ì •ì§€ ë“±ì˜ ì¡°ì¹˜ë¥¼ ì·¨í•˜ë©°, ì¡°ì¹˜ ê²°ê³¼ë¥¼ ì‹ ê³ ìì—ê²Œ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì™¸ë¶€ ê¸°ê´€ì˜ ì‹œì • ìš”êµ¬ê°€ ìˆëŠ” ê²½ìš° ê´€ë ¨ ì ˆì°¨ì— ë”°ë¼ ì¦‰ì‹œ ì´í–‰í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">6. ìš´ì˜ìÂ·ê´€ë¦¬ì êµìœ¡</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë‹´ë‹¹ìì—ê²Œ ì •ê¸° êµìœ¡(ì—° 1íšŒ ì´ìƒ)ì„ ì‹¤ì‹œí•˜ì—¬ ìœ í•´ì •ë³´ íŒë³„ ê¸°ì¤€, ì‹ ê³  ëŒ€ì‘, ê°œì¸ì •ë³´ ë³´í˜¸, ì•„ë™Â·ì²­ì†Œë…„ ì•ˆì „ ì´ìŠˆ ë“±ì„ ìˆ™ì§€í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì‹ ê·œ ì…ì‚¬ìì—ê²ŒëŠ” ì‚¬ì „ êµìœ¡ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">7. ë³´í˜¸ì(ë²•ì •ëŒ€ë¦¬ì¸) ì•ˆë‚´</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë³´í˜¸ìëŠ” ì²­ì†Œë…„ì˜ ê³„ì • ì„¤ì •ì—ì„œ ì•Œë¦¼ ìˆ˜ì‹ /ì´ìš© ì‹œê°„/ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ ë“±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì œê³µ ê¸°ëŠ¥ì— í•œí•¨).</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì²­ì†Œë…„ ê³„ì •ì˜ ì¤‘ìš” ë³€ê²½(ì—°ë ¹Â·ì—°ë½ì²˜ ë“±) ì‹œ ë³´í˜¸ì ë™ì˜ í™•ì¸ ì ˆì°¨ë¥¼ ìš´ì˜í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">8. ê°œì¸ì •ë³´ ë³´í˜¸(ìš”ì•½)</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ 14ì„¸ ë¯¸ë§Œ ì•„ë™ì˜ ê°œì¸ì •ë³´ ìˆ˜ì§‘ ì‹œ ë²•ì •ëŒ€ë¦¬ì¸ ë™ì˜ ì ˆì°¨ë¥¼ ê±°ì¹©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê°œì¸ì •ë³´ëŠ” ìµœì†Œí•œìœ¼ë¡œ ìˆ˜ì§‘í•˜ë©°, ëª©ì  ë‹¬ì„± í›„ ì§€ì²´ ì—†ì´ íŒŒê¸°í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ìì„¸í•œ ì‚¬í•­ì€ ã€Œê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ã€ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">9. ê²Œì‹œÂ·ìœ í†µ ì œíœ´ ê°€ì´ë“œ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì œíœ´ íŒŒíŠ¸ë„ˆ/í¬ë¦¬ì—ì´í„°ëŠ” ë³¸ ì •ì±…ê³¼ ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•´ì•¼ í•˜ë©°, ìœ„ë°˜ ì‹œ ê²Œì‹œ ì œí•œÂ·ìˆ˜ìµ ì •ì§€Â·ê³„ì•½ í•´ì§€ ë“±ì˜ ì¡°ì¹˜ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì—…ë¡œë“œ ì „ ì—°ë ¹ ë“±ê¸‰ ìê°€ ë¶„ë¥˜ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">10. ì¬ë°œ ë°©ì§€</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë™ì¼Â·ìœ ì‚¬ ìœ„ë°˜ì´ ë°˜ë³µë˜ëŠ” ê²½ìš°, ê°€ì¤‘ ì¡°ì¹˜(ê¸°ê°„ ì—°ì¥/ì˜êµ¬ ì •ì§€)ë¥¼ ì ìš©í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë°˜ë³µ ì‹ ê³ ê°€ ë°œìƒí•œ í‚¤ì›Œë“œ/ê³„ì •/ì½˜í…ì¸  ìœ í˜•ì€ ì‚¬ì „ ê²€ìˆ˜ ëŒ€ìƒì— í¬í•¨í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">11. ì´ìš©ì ì§€ì›</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì²­ì†Œë…„ ìœ í•´ì •ë³´ ë…¸ì¶œ ë˜ëŠ” ìœ„í—˜ ì§•í›„ ë°œê²¬ ì‹œ, ê³ ê°ì„¼í„° ë˜ëŠ” ì‹ ê³  ê¸°ëŠ¥ì„ í†µí•´ ì¦‰ì‹œ ì—°ë½í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ (í•„ìš” ì‹œ) ì™¸ë¶€ ì§€ì›ê¸°ê´€ ì—°ë½ì²˜ ì•ˆë‚´(ì˜ˆ: ìƒë‹´Â·ì‹ ê³  ì°½êµ¬)ë¥¼ ë³„ë„ ê³µì§€ì— ì œê³µí•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">12. ì •ì±…ì˜ ê°œì •</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë²•ë ¹ ë³€ê²½, ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ê°œí¸ ë“±ì— ë”°ë¼ ë³¸ ì •ì±…ì€ ê°œì •ë  ìˆ˜ ìˆìœ¼ë©°, ì‚¬ì „ ê³ ì§€ í›„ ì‹œí–‰í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì¤‘ëŒ€í•œ ë³€ê²½ì˜ ê²½ìš° ì„œë¹„ìŠ¤ ë‚´ ê³µì§€ì‚¬í•­ìœ¼ë¡œ ìµœì†Œ â—‹ì¼ ì „ ì•ˆë‚´í•©ë‹ˆë‹¤.</p>
            
            <button onclick="toggleYouthDetail()" style="margin-top: 16px; padding: 8px 16px; background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ìš”ì•½ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
        `
      },
      consent: {
        title: 'ì •ë³´ ë™ì˜ ì„¤ì •',
        content: `
          <div id="consentSummary">
            <p style="margin-bottom: 4px;">ì´ë²¤íŠ¸/ë‰´ìŠ¤ ì•Œë¦¼ ë“± ì„ íƒì  ì •ë³´ ìˆ˜ì‹  ë™ì˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p class="muted" style="margin-bottom: 4px;">ë§ˆì´í˜ì´ì§€ > ì•Œë¦¼ ì„¤ì •ì—ì„œ í•­ëª©ë³„ë¡œ ON/OFF í•˜ì„¸ìš”.</p>
            <button onclick="toggleConsentDetail()" style="margin-top: 12px; padding: 8px 16px; background: linear-gradient(135deg, #FF9F80, #FFC8B2); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ì „ì²´ ë‚´ìš© ë³´ê¸°
            </button>
          </div>
          <div id="consentDetail" style="display: none; margin-top: 16px; padding-top: 16px; border-top: 1px solid #e5e7eb;">
            <h4 style="font-size: 16px; font-weight: 700; color: #1F2937; margin: 0 0 8px 0;">ì •ë³´ ë™ì˜ ì„¤ì • ì „ë¬¸</h4>
            <p style="font-size: 12px; color: #6B7280; margin-bottom: 8px; font-style: italic;">â†“ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì „ì²´ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">1. ì•ˆë‚´</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë³¸ ë©”ë‰´ì—ì„œ ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ , ë§ì¶¤ ì¶”ì²œ, ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤ ë“± ì„ íƒì  ë™ì˜ë¥¼ ììœ ë¡­ê²Œ ì„¤ì •Â·ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•„ìˆ˜ ë™ì˜(ì„œë¹„ìŠ¤ ì œê³µÂ·ë³´ì•ˆ ë“±)ì™€ëŠ” ë³„ê°œë¡œ, ì„ íƒ ë™ì˜ë¥¼ ê±°ë¶€í•˜ì…”ë„ ê¸°ë³¸ ì„œë¹„ìŠ¤ ì´ìš©ì€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">2. ì„ íƒ ë™ì˜ í•­ëª©</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ì•„ë˜ í•­ëª©ì€ ê°ê° ê°œë³„ ON/OFF ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì´ë©”ì¼ ìˆ˜ì‹  ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë¬¸ì(SMS/LMS) ìˆ˜ì‹  ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì•± í‘¸ì‹œ ìˆ˜ì‹  ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì „í™” ìˆ˜ì‹  ë™ì˜(í•„ìš” ì‹œ)</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ë§ì¶¤í˜• ì¶”ì²œ/í”„ë¡œíŒŒì¼ë§ ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">&nbsp;&nbsp;&nbsp;ì„œë¹„ìŠ¤ ì´ìš© ë‚´ì—­ì„ ë¶„ì„í•˜ì—¬ ê°œì¸ ë§ì¶¤í˜• ì½˜í…ì¸ /í˜œíƒì„ ì œê³µí•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì œ3ì ì œê³µ(ë§ˆì¼€íŒ…/ì œíœ´) ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">&nbsp;&nbsp;&nbsp;ì œíœ´ì‚¬ì— ìµœì†Œí•œì˜ ì •ë³´ê°€ ì œê³µë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œê³µ ëŒ€ìƒÂ·ëª©ì Â·í•­ëª©Â·ë³´ìœ ê¸°ê°„ì€ ìƒì„¸ íŒì—…ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ìœ„ì¹˜ ì •ë³´(ì„ íƒ) ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">&nbsp;&nbsp;&nbsp;ë‚´ ì£¼ë³€ ì„œë¹„ìŠ¤/í˜œíƒ ì•ˆë‚´ë¥¼ ìœ„í•´ ê¸°ê¸° ìœ„ì¹˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ìœ„ì¹˜ ì‚¬ìš©ì€ ì„¤ì •ì—ì„œ ì–¸ì œë“  ì¤‘ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ <strong>ì„¤ë¬¸Â·ì´ë²¤íŠ¸ ì°¸ì—¬ ë™ì˜</strong></p>
            <p style="font-size: 14px; margin-bottom: 4px;">&nbsp;&nbsp;&nbsp;ì´ë²¤íŠ¸ ìš´ì˜, ê²½í’ˆ ë°œì†¡, ìœ ì‚¬ í–‰ì‚¬ ì•ˆë‚´ì— í™œìš©ë©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">ê° í•­ëª©ì˜ êµ¬ì²´ì  ëª©ì /í•­ëª©/ë³´ìœ ê¸°ê°„ì€ í† ê¸€ ì˜† <strong>"ìƒì„¸ë³´ê¸°"</strong>ë¡œ ë³„ë„ í‘œê¸°í•˜ì„¸ìš”.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">3. ì„¤ì • ë°©ë²•</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ê° í•­ëª© ìš°ì¸¡ì˜ í† ê¸€ ìŠ¤ìœ„ì¹˜ë¡œ ON/OFF í•˜ì‹œê³ , ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì£¼ì„¸ìš”.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì±„ë„ë³„(ì´ë©”ì¼/SMS/í‘¸ì‹œ/ì „í™”)ë¡œ ì„¸ë¶„í™” ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì•± í‘¸ì‹œëŠ” ë‹¨ë§ OS ì•Œë¦¼ ê¶Œí•œì´ êº¼ì ¸ ìˆìœ¼ë©´ ë°œì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤(ì„¤ì • > ì•Œë¦¼ ê¶Œí•œ í™•ì¸).</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">4. ë™ì˜ ì² íšŒ</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì–¸ì œë“ ì§€ ë³¸ í˜ì´ì§€ì—ì„œ ì¦‰ì‹œ ì² íšŒí•  ìˆ˜ ìˆìœ¼ë©°, ì² íšŒ ì´ì „ì— ì´ë£¨ì–´ì§„ ì²˜ë¦¬ì—ëŠ” ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë§ˆì¼€íŒ… ìˆ˜ì‹  ê±°ë¶€ëŠ” ê° ë©”ì‹œì§€ í•˜ë‹¨ 'ìˆ˜ì‹  ê±°ë¶€' ë§í¬ë¡œë„ ê°€ëŠ¥í•©ë‹ˆë‹¤(ì´ë©”ì¼Â·ë¬¸ì).</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">5. ë³´ê´€ ë° ê¸°ë¡</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ë™ì˜/ì² íšŒ ì´ë ¥(ë™ì˜ í•­ëª©, ì¼ì‹œ, ì±„ë„, ë²„ì „)ì€ ì¦ë¹™ì„ ìœ„í•´ 3ë…„ ì´ìƒ ë³´ê´€ë©ë‹ˆë‹¤(ë²•ë ¹ ê°œì • ì‹œ ì¡°ì •).</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì œ3ì ì œê³µ ë™ì˜ëŠ” ì œê³µ ì´ë ¥ê³¼ í•¨ê»˜ ë³´ê´€í•©ë‹ˆë‹¤.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">6. ë§Œ 14ì„¸ ë¯¸ë§Œ ì•„ë™</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">ë§Œ 14ì„¸ ë¯¸ë§Œì€ ë²•ì •ëŒ€ë¦¬ì¸ ë™ì˜ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê´€ë ¨ ì•ˆë‚´ì— ë”°ë¼ ì ˆì°¨ë¥¼ ì§„í–‰í•´ ì£¼ì„¸ìš”.</p>
            
            <h5 style="font-size: 14px; font-weight: 600; color: #374151; margin: 8px 0 4px 0;">7. ìœ ì˜ì‚¬í•­</h5>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì•½ê´€/ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨/ì œ3ì ì œê³µ ëŒ€ìƒì´ ì¤‘ìš” ë³€ê²½ë˜ëŠ” ê²½ìš°, ë³€ê²½ ì‹œí–‰ ìµœì†Œ 7~30ì¼ ì „ ì¬ë™ì˜ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="font-size: 14px; margin-bottom: 4px;">â€¢ ì‹œìŠ¤í…œ ë°˜ì˜ê¹Œì§€ ìµœëŒ€ â—‹ì‹œê°„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ë‚´ë¶€ ì²˜ë¦¬ SLA ë°˜ì˜).</p>
            
            <button onclick="toggleConsentDetail()" style="margin-top: 16px; padding: 8px 16px; background: #f3f4f6; color: #374151; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px;">
              ìš”ì•½ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
        `
      }
    };

    // ì´ìš© ì•ˆë‚´ íŒ¨ë„ í‘œì‹œ (ëª¨ë‹¬ í˜•íƒœ)
    function showInfoPanel(key) {
      const modal = document.getElementById('infoModal');
      const title = document.getElementById('infoPanelTitle');
      const content = document.getElementById('infoPanelContent');
      
      const data = infoData[key];
      
      if (data) {
        title.textContent = data.title;
        content.innerHTML = data.content;
        modal.style.display = 'flex';
        
        // ì²­ì†Œë…„ ë³´í˜¸ ì •ì±…ì¸ ê²½ìš° ìš”ì•½ í‘œì‹œ
        if (key === 'youth') {
          const summary = document.getElementById('youthSummary');
          const detail = document.getElementById('youthDetail');
          if (summary && detail) {
            summary.style.display = 'block';
            detail.style.display = 'none';
          }
        }
        
        // ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ì¸ ê²½ìš° ìš”ì•½ í‘œì‹œ
        if (key === 'tos') {
          const summary = document.getElementById('tosSummary');
          const detail = document.getElementById('tosDetail');
          if (summary && detail) {
            summary.style.display = 'block';
            detail.style.display = 'none';
          }
        }
        
        // ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ì¸ ê²½ìš° ìš”ì•½ í‘œì‹œ
        if (key === 'privacy') {
          const summary = document.getElementById('privacySummary');
          const detail = document.getElementById('privacyDetail');
          if (summary && detail) {
            summary.style.display = 'block';
            detail.style.display = 'none';
          }
        }
        
        // ì •ë³´ ë™ì˜ ì„¤ì •ì¸ ê²½ìš° ìš”ì•½ í‘œì‹œ
        if (key === 'consent') {
          const summary = document.getElementById('consentSummary');
          const detail = document.getElementById('consentDetail');
          if (summary && detail) {
            summary.style.display = 'block';
            detail.style.display = 'none';
          }
        }
      }
    }

    // ì²­ì†Œë…„ ë³´í˜¸ ì •ì±… ì „ì²´/ìš”ì•½ í† ê¸€
    function toggleYouthDetail() {
      const summary = document.getElementById('youthSummary');
      const detail = document.getElementById('youthDetail');
      
      if (summary && detail) {
        if (detail.style.display === 'none') {
          summary.style.display = 'none';
          detail.style.display = 'block';
        } else {
          summary.style.display = 'block';
          detail.style.display = 'none';
        }
      }
    }

    // ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ì „ì²´/ìš”ì•½ í† ê¸€
    function toggleTosDetail() {
      const summary = document.getElementById('tosSummary');
      const detail = document.getElementById('tosDetail');
      
      if (summary && detail) {
        if (detail.style.display === 'none') {
          summary.style.display = 'none';
          detail.style.display = 'block';
        } else {
          summary.style.display = 'block';
          detail.style.display = 'none';
        }
      }
    }

    // ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ì „ì²´/ìš”ì•½ í† ê¸€
    function togglePrivacyDetail() {
      const summary = document.getElementById('privacySummary');
      const detail = document.getElementById('privacyDetail');
      
      if (summary && detail) {
        if (detail.style.display === 'none') {
          summary.style.display = 'none';
          detail.style.display = 'block';
        } else {
          summary.style.display = 'block';
          detail.style.display = 'none';
        }
      }
    }

    // ì •ë³´ ë™ì˜ ì„¤ì • ì „ì²´/ìš”ì•½ í† ê¸€
    function toggleConsentDetail() {
      const summary = document.getElementById('consentSummary');
      const detail = document.getElementById('consentDetail');
      
      if (summary && detail) {
        if (detail.style.display === 'none') {
          summary.style.display = 'none';
          detail.style.display = 'block';
        } else {
          summary.style.display = 'block';
          detail.style.display = 'none';
        }
      }
    }

    // ì´ìš© ì•ˆë‚´ íŒ¨ë„ ë‹«ê¸°
    function closeInfoPanel() {
      const modal = document.getElementById('infoModal');
      modal.style.display = 'none';
    }

    // ESC í‚¤ë¡œ íŒ¨ë„ ë‹«ê¸°
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const modal = document.getElementById('infoModal');
        if (modal && modal.style.display === 'flex') {
          closeInfoPanel();
        }
      }
    });

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    document.addEventListener('click', function(e) {
      const infoModal = document.getElementById('infoModal');
      if (e.target === infoModal) {
        closeInfoPanel();
      }
    });
  </script>
  <script src="{{ url_for("static", filename="js/navigation.js") }}"></script>
</body>
</html>

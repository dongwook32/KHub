<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KBU hub | 마이페이지</title>
    <link rel="icon" href="{{ url_for('static', filename='images/logo.png') }}">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 모든 페이지에 공통으로 필요한 CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nav.css') }}">
    <!-- 마이페이지 전용 CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mypage.css') }}">
    <script>
        // Tailwind CSS 설정 (다른 페이지와 동일하게 유지)
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { peach: '#FFC8B2', peachDeep: '#FF9F80', cream: '#FFF7F2', cocoa: '#6B7280', ink: '#1F2937', mint: '#B7F4E6', lemon: '#FFF3A3' },
                    boxShadow: { soft: '0 10px 30px rgba(255,159,128,.18)', glow: '0 0 0 0 rgba(255,159,128,.0)', card: '0 10px 24px rgba(17,24,39,.08)' },
                    borderRadius: { bubble: '999px', xl2: '1.25rem' }
                }
            }
        }
    </script>
</head>
<body class="bg-cream">
    <!-- 배경 그라데이션 (다른 페이지와 동일하게 추가) -->
    <div class="top-grad h-[160px] w-full absolute inset-0 -z-10 pointer-events-none"></div>

    <!-- 헤더: 다른 페이지와 100% 동일한 구조로 복구 -->
    <header class="fixed top-0 left-0 right-0 z-50 border-b border-peach/40 glass">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
            <a href="{{ url_for('index') }}" class="flex items-center gap-2 font-extrabold text-lg">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="KBU hub" class="w-9 h-9 rounded-full shadow-[0_8px_18px_rgba(255,159,128,.25)]">
                <span>hub</span>
            </a>
            <nav class="ml-auto hidden md:flex">
                <div id="navPill" class="nav-pill">
                    <!-- JS가 여기에 메뉴를 채웁니다 -->
                </div>
            </nav>
            <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60">☰</button>
        </div>
        <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70">
            <div class="flex flex-col gap-1 py-2 text-sm">
                <!-- JS가 여기에 모바일 메뉴를 채웁니다 -->
            </div>
        </div>
    </header>

    <main class="mypage-container">
        <!-- 계정 정보 카드 -->
        <div class="mypage-card">
            <h2 class="section-title">계정</h2>
            <div class="info-grid">
                <div><span class="info-label">이름</span><span class="info-value">{{ user.name }}</span></div>
                <div><span class="info-label">학번</span><span class="info-value">{{ user.student_id }}</span></div>
                <div><span class="info-label">생일</span><span class="info-value">{{ user.birthday.strftime('%Y-%m-%d') }}</span></div>
                <div><span class="info-label">성별</span><span class="info-value">{{ user.gender }}</span></div>
                <div><span class="info-label">재학 상태</span><span class="info-value">{{ user.status }}</span></div>
                <div><span class="info-label">이메일</span><span class="info-value">{{ user.email }}</span></div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="openModal('editProfileModal')">프로필 수정</button>
                <button class="btn btn-secondary" onclick="openModal('changePasswordModal')">비밀번호 변경</button>
            </div>
        </div>

        <!-- 내 활동 카드 -->
        <div class="mypage-card">
            <div class="section-header">
                <h2 class="section-title">내 활동</h2>
                <button class="btn-text" onclick="openModal('activityModal')">더 보기</button>
            </div>
            <div class="activity-summary-grid">
                <div><span class="info-label">내 글</span><span class="info-value">0</span></div>
                <div><span class="info-label">내 댓글</span><span class="info-value">0</span></div>
                <div><span class="info-label">좋아요한 글</span><span class="info-value">0</span></div>
                <div><span class="info-label">좋아요한 댓글</span><span class="info-value">0</span></div>
            </div>
        </div>

        <!-- 이용 안내 및 탈퇴 -->
        <div class="mypage-card">
             <h2 class="section-title">이용 안내</h2>
            <div class="link-group">
                <a href="#">문의하기</a>
                <a href="#">공지사항</a>
                <a href="#">서비스 이용약관</a>
                <a href="#">개인정보 처리방침</a>
                <button class="btn-text" onclick="openModal('consentModal')">정보 동의 설정</button>
            </div>
            <div class="mt-8 text-center">
                <button class="btn-text btn-danger" onclick="openModal('deleteAccountModal')">회원 탈퇴</button>
            </div>
        </div>
    </main>

    <footer class="text-center text-sm text-cocoa py-6">
        <div>© <span id="year"></span> KBU hub · All rights reserved.</div>
    </footer>

    <!-- ========== 모달(팝업) 영역 ========== -->
    <!-- (모든 모달 HTML 구조는 여기에 그대로 유지) -->
    <div id="editProfileModal" class="modal-backdrop">...</div>
    <div id="changePasswordModal" class="modal-backdrop">...</div>
    <div id="consentModal" class="modal-backdrop">...</div>
    <div id="deleteAccountModal" class="modal-backdrop">...</div>
    <div id="activityModal" class="modal-backdrop">...</div>


    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
        function openModal(modalId) { document.getElementById(modalId).style.display = 'flex'; }
        function closeModal(modalId) { document.getElementById(modalId).style.display = 'none'; }
    </script>
    
    <!-- 네비게이션 JS가 맨 마지막에 위치해야 합니다 -->
    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
</body>
</html>


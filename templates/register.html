<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KBU hub | 회원가입</title>
  <link rel="icon" href="{{ url_for('static', filename='images/logo.png') }}">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/nav.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { peach: '#FFC8B2', peachDeep: '#FF9F80', cream: '#FFF7F2', cocoa:'#6B7280', ink:'#1F2937', mint:'#B7F4E6', lemon:'#FFF3A3' },
          boxShadow: { soft:'0 10px 30px rgba(255,159,128,.18)', glow:'0 0 0 0 rgba(255,159,128,.0)', card:'0 10px 24px rgba(17,24,39,.08)' },
          borderRadius: { bubble:'999px', xl2:'1.25rem' }
        }
      }
    }
  </script>
  <style>
    html, body { font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif; }
    .top-grad{ background: radial-gradient(60% 60% at 0% 0%, #FFF0E7 0%, rgba(255,240,231,0) 60%), radial-gradient(60% 60% at 100% 0%, #FFE7DB 0%, rgba(255,231,219,0) 60%); }
    .glass{ background: rgba(255,255,255,.7); backdrop-filter: blur(10px); }
    
    /* 통일된 Footer 스타일 */
    footer {
        border-top: 1px solid rgba(255, 200, 178, 0.5);
        margin-top: 0;
        padding: 0;
    }
    
    footer > div {
        max-width: 72rem;
        margin: 0 auto;
        padding: 1.5rem 1rem;
        font-size: 0.875rem;
        line-height: 1.25rem;
        color: #6B7280;
        text-align: center;
    }
  </style>
</head>
<body class="bg-cream">
  <div class="top-grad h-[160px] w-full absolute inset-0 -z-10 pointer-events-none"></div>

  <header class="fixed top-0 left-0 right-0 z-50 border-b border-peach/40 glass">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
      <a href="{{ url_for('index') }}" class="flex items-center gap-2 font-extrabold text-lg">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="KBU hub" class="w-9 h-9 rounded-full shadow-[0_8px_18px_rgba(255,159,128,.25)]">
        <span>hub</span>
      </a>
      <nav class="ml-auto hidden md:flex">
        <div id="navPill" class="nav-pill">
          <!-- 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
        </div>
      </nav>
      <button id="menuBtn" class="md:hidden ml-auto p-2 rounded-full border border-peach/60">☰</button>
    </div>
    <div id="mobileNav" class="hidden md:hidden px-4 pb-3 border-t border-peach/40 bg-white/70">
      <div class="flex flex-col gap-1 py-2 text-sm">
        <!-- 모바일 네비게이션 아이템은 navigation.js에서 동적으로 생성됩니다 -->
      </div>
    </div>
  </header>

  <main style="margin-top: 80px;">
<!-- 전역 알림 영역 -->
<div id="globalAlert" class="global-alert" role="alert" aria-live="polite" style="display: none;">
  <span id="alertMessage"></span>
  <button type="button" class="alert-close" onclick="closeAlert()" aria-label="알림 닫기">&times;</button>
</div>

<!-- Flask Flash 메시지 표시 -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="global-alert alert-{{ category }} flash-message" role="alert" style="display: flex; position: fixed; top: 100px; left: 50%; transform: translateX(-50%); z-index: 9999; min-width: 300px; max-width: 600px; transition: opacity 0.5s ease-out;">
        <span>{{ message }}</span>
        <button type="button" class="alert-close" onclick="this.parentElement.style.display='none'" aria-label="알림 닫기">&times;</button>
      </div>
      <script>
        setTimeout(function() {
          const alertEl = document.querySelector('.global-alert.alert-{{ category }}');
          if (alertEl) {
            alertEl.style.opacity = '0';
            setTimeout(function() {
              alertEl.style.display = 'none';
            }, 500);
          }
        }, 3000);
      </script>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="register-container">
  <div class="register-card">
    <!-- 헤더 -->
    <div class="register-header">
      <h1>회원가입</h1>
      <p class="register-subtitle">KBU Hub에 오신 것을 환영합니다</p>
    </div>

    <!-- 회원가입 폼 -->
    <form id="registerForm" method="POST" action="{{ url_for('register') }}" novalidate>
      
      <!-- 학번 (아이디) & 이메일 -->
      <div class="form-row">
        <div class="form-group">
          <label for="student_id" class="form-label">
            학번 (아이디) <span class="required">*</span>
          </label>
          <input 
            type="text" 
            id="student_id" 
            name="student_id" 
            class="form-input" 
            placeholder="200104021"
            maxlength="9"
            minlength="9"
            pattern="\d{9}"
            required
            aria-required="true"
            aria-describedby="studentIdError studentIdHint studentIdSuccess">
          <div class="form-hint" id="studentIdHint">숫자 9자리를 입력해주세요.</div>
          <div class="form-success" id="studentIdSuccess" style="display: none;" role="status"></div>
          <div class="form-error" id="studentIdError" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">
            이메일 <span class="required">*</span>
          </label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            class="form-input" 
            placeholder="user@bible.ac.kr"
            required
            aria-required="true"
            aria-describedby="emailError emailHint">
          <div class="form-hint" id="emailHint">@bible.ac.kr 도메인만 사용 가능합니다.</div>
          <div class="form-error" id="emailError" role="alert"></div>
        </div>
      </div>

      <!-- 비밀번호 & 비밀번호 재확인 -->
      <div class="form-row">
        <div class="form-group">
          <label for="password" class="form-label">
            비밀번호 <span class="required">*</span>
          </label>
          <input 
            type="password" 
            id="password" 
            name="password" 
            class="form-input" 
            minlength="8"
            maxlength="15"
            required
            aria-required="true"
            aria-describedby="passwordError passwordHint">
          <div class="form-hint" id="passwordHint">8~15자, 영문/숫자/특수문자 중 2종 이상 조합을 권장합니다.</div>
          <div class="form-error" id="passwordError" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="password_confirm" class="form-label">
            비밀번호 재확인 <span class="required">*</span>
          </label>
          <input 
            type="password" 
            id="password_confirm" 
            name="password_confirm" 
            class="form-input" 
            minlength="8"
            maxlength="15"
            required
            aria-required="true"
            aria-describedby="passwordConfirmError passwordConfirmHint">
          <div class="form-hint" id="passwordConfirmHint"></div>
          <div class="form-success" id="passwordConfirmSuccess" style="display: none;">비밀번호가 일치합니다.</div>
          <div class="form-error" id="passwordConfirmError" role="alert"></div>
        </div>
      </div>

      <!-- 이름 & 성별 -->
      <div class="form-row">
        <div class="form-group">
          <label for="name" class="form-label">
            이름 <span class="required">*</span>
          </label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            class="form-input" 
            placeholder="홍길동"
            maxlength="11"
            required
            aria-required="true"
            aria-describedby="nameError nameHint">
          <div class="form-hint" id="nameHint">최대 11자까지 입력 가능합니다.</div>
          <div class="form-error" id="nameError" role="alert"></div>
        </div>

        <div class="form-group">
          <label class="form-label">
            성별 <span class="required">*</span>
          </label>
          <div class="radio-group" role="radiogroup" aria-required="true" aria-describedby="genderError">
            <label class="radio-label">
              <input 
                type="radio" 
                name="gender" 
                value="남자" 
                id="gender_male"
                required
                aria-required="true">
              <span class="radio-custom"></span>
              <span class="radio-text">남자</span>
            </label>
            <label class="radio-label">
              <input 
                type="radio" 
                name="gender" 
                value="여자" 
                id="gender_female"
                required
                aria-required="true">
              <span class="radio-custom"></span>
              <span class="radio-text">여자</span>
            </label>
          </div>
          <div class="form-error" id="genderError" role="alert"></div>
        </div>
      </div>

      <!-- 생년월일 & 재학 상태 -->
      <div class="form-row">
        <div class="form-group">
          <label for="birthday" class="form-label">
            생년월일 <span class="required">*</span>
          </label>
          <input 
            type="date" 
            id="birthday" 
            name="birthday" 
            class="form-input" 
            required
            aria-required="true"
            aria-describedby="birthdayError birthdayHint">
          <div class="form-hint" id="birthdayHint">미래 날짜는 선택할 수 없습니다.</div>
          <div class="form-error" id="birthdayError" role="alert"></div>
        </div>

        <div class="form-group">
          <label for="status" class="form-label">
            재학 상태 <span class="required">*</span>
          </label>
          <select 
            id="status" 
            name="status" 
            class="form-select"
            required
            aria-required="true"
            aria-describedby="statusError">
            <option value="">선택</option>
            <option value="재학생">재학생</option>
            <option value="휴학생">휴학생</option>
            <option value="졸업">졸업</option>
          </select>
          <div class="form-error" id="statusError" role="alert"></div>
        </div>
      </div>

      <!-- 버튼 그룹 -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          회원가입
        </button>
        <a href="{{ url_for('login') }}" class="btn btn-secondary">
          로그인 페이지로
        </a>
      </div>
    </form>
  </div>
</div>
  </main>

  <footer>
    <div>
      © <span id="year"></span> KBU hub · All rights reserved.
    </div>
  </footer>

  <script>
    // 년도 설정
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('year').textContent = new Date().getFullYear();
    });
  </script>
  <script src="{{ url_for('static', filename='js/register.js') }}"></script>
  <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
</body>
</html>

